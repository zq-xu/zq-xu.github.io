import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.48927342.js";const o="/images/open-source/tekton/tekton-dashboard.png",h=JSON.parse('{"title":"Tekton安装","description":"","frontmatter":{"date":"2022-10-31T00:00:00.000Z","tag":["Tekton"],"tags":["Kubernetes"],"categories":["DevOps"]},"headers":[],"relativePath":"zh/open-source/tekton/installation.md","filePath":"zh/open-source/tekton/installation.md"}'),p={name:"zh/open-source/tekton/installation.md"},e=l(`<h1 id="tekton安装" tabindex="-1">Tekton安装 <a class="header-anchor" href="#tekton安装" aria-label="Permalink to &quot;Tekton安装&quot;">​</a></h1><h2 id="概览" tabindex="-1">概览 <a class="header-anchor" href="#概览" aria-label="Permalink to &quot;概览&quot;">​</a></h2><p>Tekton 是Kubernetes环境中常用的 CI/CD 工具，其主要提供了流水线功能，便于开发者进行项目打包。</p><p>Tekton环境主要包括以下内容：</p><ul><li>tekton-pipeline: <ul><li>tekton-pipeline-controller:主要用于流水线的流程控制</li><li>tekton-pipeline-webhook：主要用于tekton定义的CRD的校验</li></ul></li><li>tekton-dashboard：tekton流水线的可视化界面</li><li>tekton-triggers：tekton触发器，主要用于监听git commit/merge等事件，并对相应事件进行反应</li></ul><p>Tekton相关资料如下：</p><ul><li><a href="https://github.com/tektoncd/pipeline" target="_blank" rel="noreferrer">Github项目</a></li><li><a href="https://github.com/tektoncd/pipeline/blob/main/docs/install.md" target="_blank" rel="noreferrer">Github上的安装教程</a></li><li><a href="https://tekton.dev/docs/" target="_blank" rel="noreferrer">官网文档</a></li></ul><h2 id="安装tekton环境" tabindex="-1">安装Tekton环境 <a class="header-anchor" href="#安装tekton环境" aria-label="Permalink to &quot;安装Tekton环境&quot;">​</a></h2><p>安装信息总览：</p><ul><li>tekton-pipeline版本：v0.31.0</li><li>tekton-dashboard版本：v0.23.0</li><li>tekton-triggers版本：v0.17.1</li></ul><h2 id="获取安装文件" tabindex="-1">获取安装文件 <a class="header-anchor" href="#获取安装文件" aria-label="Permalink to &quot;获取安装文件&quot;">​</a></h2><ul><li><p><em><strong>方式1</strong></em> 使用<a href="/downloads/open-source/tekton/tekton.zip">tekton.zip</a>中文件，该包中所用镜像已调整为内网环境镜像.</p></li><li><p><em><strong>方式2</strong></em> 从以下链接获取安装文件，该文件中所用镜像需联通外网环境方能拉取：</p></li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">tekton-pipeline组件安装文件：</span></span>
<span class="line"><span style="color:#e1e4e8;">https://storage.googleapis.com/tekton-releases/pipeline/previous/v0.31.0/release.yaml</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">tekton-dashboard组件安装文件：</span></span>
<span class="line"><span style="color:#e1e4e8;">https://storage.googleapis.com/tekton-releases/dashboard/previous/v0.23.0/tekton-dashboard-release.yaml</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">tekton-triggers组件安装文件：</span></span>
<span class="line"><span style="color:#e1e4e8;">https://storage.googleapis.com/tekton-releases/triggers/previous/v0.17.0/release.yaml</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">tekton-pipeline组件安装文件：</span></span>
<span class="line"><span style="color:#24292e;">https://storage.googleapis.com/tekton-releases/pipeline/previous/v0.31.0/release.yaml</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">tekton-dashboard组件安装文件：</span></span>
<span class="line"><span style="color:#24292e;">https://storage.googleapis.com/tekton-releases/dashboard/previous/v0.23.0/tekton-dashboard-release.yaml</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">tekton-triggers组件安装文件：</span></span>
<span class="line"><span style="color:#24292e;">https://storage.googleapis.com/tekton-releases/triggers/previous/v0.17.0/release.yaml</span></span></code></pre></div><h2 id="执行安装脚本" tabindex="-1">执行安装脚本 <a class="header-anchor" href="#执行安装脚本" aria-label="Permalink to &quot;执行安装脚本&quot;">​</a></h2><p>执行以下脚本选择性安装需要的组件：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apply</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> $fileName</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">apply</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> $fileName</span></span></code></pre></div><h2 id="验证安装" tabindex="-1">验证安装 <a class="header-anchor" href="#验证安装" aria-label="Permalink to &quot;验证安装&quot;">​</a></h2><p>按照以上安装过程操作完毕，Tekton相关组件会被安装在名为”tekton-pipelines”的namespace中，查看该namespace中的关键资源：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">po,svc</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-ntekton-pipelines</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                                              </span><span style="color:#9ECBFF;">READY</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">RESTARTS</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">AGE</span></span>
<span class="line"><span style="color:#B392F0;">pod/tekton-dashboard-85b7b59f46-4nwvm</span><span style="color:#E1E4E8;">             </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">125</span><span style="color:#9ECBFF;">m</span></span>
<span class="line"><span style="color:#B392F0;">pod/tekton-pipelines-controller-5474ff4b7-pptr7</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">125</span><span style="color:#9ECBFF;">m</span></span>
<span class="line"><span style="color:#B392F0;">pod/tekton-pipelines-webhook-7fb8865445-6dbc4</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">125</span><span style="color:#9ECBFF;">m</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                                  </span><span style="color:#9ECBFF;">TYPE</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">CLUSTER-IP</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">EXTERNAL-IP</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">PORT</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">S</span><span style="color:#E1E4E8;">)                              </span><span style="color:#9ECBFF;">AGE</span></span>
<span class="line"><span style="color:#B392F0;">service/tekton-dashboard</span><span style="color:#E1E4E8;">              </span><span style="color:#9ECBFF;">NodePort</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">10.97</span><span style="color:#9ECBFF;">.2.217</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">9097</span><span style="color:#9ECBFF;">:31805/TCP</span><span style="color:#E1E4E8;">                       </span><span style="color:#79B8FF;">81</span><span style="color:#9ECBFF;">d</span></span>
<span class="line"><span style="color:#B392F0;">service/tekton-pipelines-controller</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">10.109</span><span style="color:#9ECBFF;">.51.209</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">9090</span><span style="color:#9ECBFF;">/TCP,8008/TCP,8080/TCP</span><span style="color:#E1E4E8;">           </span><span style="color:#79B8FF;">81</span><span style="color:#9ECBFF;">d</span></span>
<span class="line"><span style="color:#B392F0;">service/tekton-pipelines-webhook</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">10.100</span><span style="color:#9ECBFF;">.14.228</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">9090</span><span style="color:#9ECBFF;">/TCP,8008/TCP,443/TCP,8080/TCP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">81</span><span style="color:#9ECBFF;">d</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">po,svc</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-ntekton-pipelines</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                                              </span><span style="color:#032F62;">READY</span><span style="color:#24292E;">   </span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">      </span><span style="color:#032F62;">RESTARTS</span><span style="color:#24292E;">   </span><span style="color:#032F62;">AGE</span></span>
<span class="line"><span style="color:#6F42C1;">pod/tekton-dashboard-85b7b59f46-4nwvm</span><span style="color:#24292E;">             </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">125</span><span style="color:#032F62;">m</span></span>
<span class="line"><span style="color:#6F42C1;">pod/tekton-pipelines-controller-5474ff4b7-pptr7</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">125</span><span style="color:#032F62;">m</span></span>
<span class="line"><span style="color:#6F42C1;">pod/tekton-pipelines-webhook-7fb8865445-6dbc4</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">125</span><span style="color:#032F62;">m</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                                  </span><span style="color:#032F62;">TYPE</span><span style="color:#24292E;">        </span><span style="color:#032F62;">CLUSTER-IP</span><span style="color:#24292E;">      </span><span style="color:#032F62;">EXTERNAL-IP</span><span style="color:#24292E;">   </span><span style="color:#032F62;">PORT</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">S</span><span style="color:#24292E;">)                              </span><span style="color:#032F62;">AGE</span></span>
<span class="line"><span style="color:#6F42C1;">service/tekton-dashboard</span><span style="color:#24292E;">              </span><span style="color:#032F62;">NodePort</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">10.97</span><span style="color:#032F62;">.2.217</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">9097</span><span style="color:#032F62;">:31805/TCP</span><span style="color:#24292E;">                       </span><span style="color:#005CC5;">81</span><span style="color:#032F62;">d</span></span>
<span class="line"><span style="color:#6F42C1;">service/tekton-pipelines-controller</span><span style="color:#24292E;">   </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">10.109</span><span style="color:#032F62;">.51.209</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">9090</span><span style="color:#032F62;">/TCP,8008/TCP,8080/TCP</span><span style="color:#24292E;">           </span><span style="color:#005CC5;">81</span><span style="color:#032F62;">d</span></span>
<span class="line"><span style="color:#6F42C1;">service/tekton-pipelines-webhook</span><span style="color:#24292E;">      </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">10.100</span><span style="color:#032F62;">.14.228</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">9090</span><span style="color:#032F62;">/TCP,8008/TCP,443/TCP,8080/TCP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">81</span><span style="color:#032F62;">d</span></span></code></pre></div><p>从控制台输出可知，Tekton-Dashboard通过NodePort 31805端口暴露服务，因此，可以通过该端口访问web界面：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">http://$hostIP:31805</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">http://$hostIP:31805</span></span></code></pre></div><p>界面展示如下： <img src="`+o+'" alt="tekton-dashboard"></p>',22),t=[e];function r(c,y,i,E,F,d){return n(),a("div",null,t)}const k=s(p,[["render",r]]);export{h as __pageData,k as default};
