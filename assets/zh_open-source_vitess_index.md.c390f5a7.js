import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.48927342.js";const p="/images/open-source/vitess/vitess-architecture.png",o="/images/open-source/vitess/image2-vtvtld.png",m=JSON.parse('{"title":"Vitess","description":"Vitess是一个用于部署，扩展和管理大型开源数据库实例集群的数据库解决方案。通俗点说，就是在云环境下对大型数据库及数据库集群进行分库分表并提供可靠性处理的方案。","frontmatter":{"description":"Vitess是一个用于部署，扩展和管理大型开源数据库实例集群的数据库解决方案。通俗点说，就是在云环境下对大型数据库及数据库集群进行分库分表并提供可靠性处理的方案。","cover":"/images/open-source/vitess/vitess-horizontal-color.svg","hiddenCover":true,"date":"2021-11-10T00:00:00.000Z","tag":["Vitess"],"tags":["Kubernetes","CNCF"],"categories":["Open Source"]},"headers":[],"relativePath":"zh/open-source/vitess/index.md","filePath":"zh/open-source/vitess/index.md"}'),e={name:"zh/open-source/vitess/index.md"},t=l('<h1 id="vitess" tabindex="-1">Vitess <a class="header-anchor" href="#vitess" aria-label="Permalink to &quot;Vitess&quot;">​</a></h1><p>Vitess是一个用于部署，扩展和管理大型开源数据库实例集群的数据库解决方案。通俗点说，就是在云环境下对大型数据库及数据库集群进行分库分表并提供可靠性处理的方案,详情可参见<a href="https://vitess.io/docs/" target="_blank" rel="noreferrer">Vitess官方文档</a>。 Vitess目前支持数据库类型如下：</p><ul><li>Mysql(5.6-8.0)；</li><li>Percona(5.6-8.0)；</li><li>MariaDB(10.0-10.3)</li></ul><p>Vitess在github开源，是CNCF少有的毕业项目之一,其项目地址<a href="https://github.com/vitessio/vitess" target="_blank" rel="noreferrer">Vitess Github</a>。</p><h2 id="vitess运行时架构" tabindex="-1">Vitess运行时架构 <a class="header-anchor" href="#vitess运行时架构" aria-label="Permalink to &quot;Vitess运行时架构&quot;">​</a></h2><p><img src="'+p+`" alt="architecture_Fotor.png"></p><p>如图1所示,Vitess是基于微服务的框架进行设计的，其运行时设计整体看来是非常简单的，负责数据库请求处理的核心组件是VTGate和VTTablet，设计思想是路由转发：</p><ul><li>VTGate: 路由中心，所有数据库请求由VTGate进行分发处理，并最终汇总处理结果返回给请求端；</li><li>VTTablet: 作为mysql实例的sidecar存在，每个mysql实例都有一个VTTablet伴生，其接受由VTGate分发的指令进行相应处理并将结果汇总至VTGate。</li></ul><p>Vitess的集群管理是由图1中Topology组件来负责的，其存储了Vitess集群中各组件的状态信息和分库分表的规则、读写权限等元数据信息，作用相当于k8s集群中的etcd. 事实上Vitess在其官方Opeator的处理上还是使用3节点的etcd集群作为Topology的实现。</p><p>Vitess也提供了交互工具:</p><ul><li>vtctld作为serer存在，提供RestAPI接口供外部访问Topology中的集群信息,同时提供可视化界面，可由浏览器进行访问；</li><li>vtctl作为命令行工具，可以以client的身份进行Vitess集群进行交互，其功能类似于k8s中的kubectl。</li></ul><h1 id="vitess基础概念" tabindex="-1">Vitess基础概念 <a class="header-anchor" href="#vitess基础概念" aria-label="Permalink to &quot;Vitess基础概念&quot;">​</a></h1><table><thead><tr><th style="text-align:center;">cell</th><th>物理上的可用区，可理解为一台服务器、一个k8s集群或者一个数据中心等。</th></tr></thead><tbody><tr><td style="text-align:center;">keyspace</td><td>keyspace是逻辑上的数据库，可以由多个分片(shard)组成，也就是所谓的分库，即将单个数据库实例中的数据拆分到多个数据库实例中，这些实例对外呈现为一个对象，这个对象就是keyspace。每个keyspace由一个区间内的keyspace ID组成。</td></tr><tr><td style="text-align:center;">keyspace ID</td><td>keyspace ID本身是使用数据中某些列的功能（例如用户ID）来计算的,Vitess允许根据需求自定义计算方法。</td></tr><tr><td style="text-align:center;">shard</td><td>一个shard就是在一个keyspace中的一个水平分片。每个shard都覆盖一个区间内的keyspace ID,都会包含一个master实例、多个replica实例和多个ReadOnly实例，而且不同的shard之间绝对不会存在数据重叠的现象。</td></tr><tr><td style="text-align:center;">master</td><td>主库提供读写服务</td></tr><tr><td style="text-align:center;">replicate</td><td>提供读服务，缓解主库读压力</td></tr><tr><td style="text-align:center;">rdonly</td><td>会与主库断开复制，允许异步的服务（备份、分析）使用</td></tr></tbody></table><h1 id="vitess部署操作" tabindex="-1">Vitess部署操作 <a class="header-anchor" href="#vitess部署操作" aria-label="Permalink to &quot;Vitess部署操作&quot;">​</a></h1><p>Vitess官方提供了四种安装方式：</p><ul><li>通过docker进行本地安装；</li><li>通过命令行指令进行本地安装；</li><li>基于k8s的operator安装；</li><li>helm包安装，此安装方式已停止维护。</li></ul><p>此次选择使用基于k8s的operator进行Vitess(8.0版本)的安装，vitess的Operator在Github上开源<a href="https://github.com/planetscale/vitess-operator" target="_blank" rel="noreferrer">Vitess-Operator Github项目地址</a>。</p><h2 id="前期准备" tabindex="-1">前期准备 <a class="header-anchor" href="#前期准备" aria-label="Permalink to &quot;前期准备&quot;">​</a></h2><p>附件<a href="/downloads/open-source/vitess/vitess-deploy.tgz">vitess-deploy.tar.gz</a>中有部署过程中的部分内容。</p><h3 id="下载vitess开源代码" tabindex="-1">下载vitess开源代码 <a class="header-anchor" href="#下载vitess开源代码" aria-label="Permalink to &quot;下载vitess开源代码&quot;">​</a></h3><p>从github上下载vitess源代码<a href="https://github.com/vitessio/vitess" target="_blank" rel="noreferrer">Vitess Github</a>，指定release-8.0分支。</p><h3 id="下载vtctlclient" tabindex="-1">下载vtctlclient <a class="header-anchor" href="#下载vtctlclient" aria-label="Permalink to &quot;下载vtctlclient&quot;">​</a></h3><p>可从github上的vitess发布版本中下载编译好的vtctlclient文件，位于/bin目录下<a href="https://github.com/vitessio/vitess/releases/tag/v8.0.0" target="_blank" rel="noreferrer">vitess-8.0.0</a>，将其置于vitess源码的/examples/operator/目录下。</p><h3 id="安装mysql" tabindex="-1">安装mysql <a class="header-anchor" href="#安装mysql" aria-label="Permalink to &quot;安装mysql&quot;">​</a></h3><p>可参考<a href="https://www.jianshu.com/p/1dab9a4d0d5f" target="_blank" rel="noreferrer">CentOS 7 下 MySQL 5.7 的安装与配置</a></p><h3 id="准备local-pv" tabindex="-1">准备local-pv <a class="header-anchor" href="#准备local-pv" aria-label="Permalink to &quot;准备local-pv&quot;">​</a></h3><p>准备11个本地目录作为local-pv，并赋予该目录读写权限，pv文件模板如下：</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">PersistentVolume</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">pv-hostpath-1</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">labels</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">local</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">capacity</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">storage</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">10Gi</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">accessModes</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#9ECBFF;">ReadWriteOnce</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">hostPath</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">path</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;/root/xzq/vitess/pv/pv1&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">nodeAffinity</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">required</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">nodeSelectorTerms</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#85E89D;">matchExpressions</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        - </span><span style="color:#85E89D;">key</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">kubernetes.io/hostname</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">operator</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">In</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">values</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">          - </span><span style="color:#9ECBFF;">qfusion</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">PersistentVolume</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">pv-hostpath-1</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">labels</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">type</span><span style="color:#24292E;">: </span><span style="color:#032F62;">local</span></span>
<span class="line"><span style="color:#22863A;">spec</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">capacity</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">storage</span><span style="color:#24292E;">: </span><span style="color:#032F62;">10Gi</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">accessModes</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#032F62;">ReadWriteOnce</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">hostPath</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">path</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;/root/xzq/vitess/pv/pv1&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">nodeAffinity</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">required</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">nodeSelectorTerms</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#22863A;">matchExpressions</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">        - </span><span style="color:#22863A;">key</span><span style="color:#24292E;">: </span><span style="color:#032F62;">kubernetes.io/hostname</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">operator</span><span style="color:#24292E;">: </span><span style="color:#032F62;">In</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">values</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">          - </span><span style="color:#032F62;">qfusion</span></span></code></pre></div><h2 id="安装vitess-operator" tabindex="-1">安装Vitess-Operator <a class="header-anchor" href="#安装vitess-operator" aria-label="Permalink to &quot;安装Vitess-Operator&quot;">​</a></h2><p>进入到下载的vitess目录下，根据operator文件进行部署。</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#cd vitess-release-8.0/examples/operator/</span></span>
<span class="line"><span style="color:#6A737D;">#kubectl apply -f operator.yaml  -nxzq</span></span>
<span class="line"><span style="color:#B392F0;">customresourcedefinition.apiextensions.k8s.io/etcdlockservers.planetscale.com</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span></span>
<span class="line"><span style="color:#B392F0;">customresourcedefinition.apiextensions.k8s.io/vitessbackups.planetscale.com</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span></span>
<span class="line"><span style="color:#B392F0;">customresourcedefinition.apiextensions.k8s.io/vitessbackupstorages.planetscale.com</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span></span>
<span class="line"><span style="color:#B392F0;">customresourcedefinition.apiextensions.k8s.io/vitesscells.planetscale.com</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span></span>
<span class="line"><span style="color:#B392F0;">customresourcedefinition.apiextensions.k8s.io/vitessclusters.planetscale.com</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span></span>
<span class="line"><span style="color:#B392F0;">customresourcedefinition.apiextensions.k8s.io/vitesskeyspaces.planetscale.com</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span></span>
<span class="line"><span style="color:#B392F0;">customresourcedefinition.apiextensions.k8s.io/vitessshards.planetscale.com</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span></span>
<span class="line"><span style="color:#B392F0;">serviceaccount/vitess-operator</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span></span>
<span class="line"><span style="color:#B392F0;">role.rbac.authorization.k8s.io/vitess-operator</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span></span>
<span class="line"><span style="color:#B392F0;">rolebinding.rbac.authorization.k8s.io/vitess-operator</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span></span>
<span class="line"><span style="color:#B392F0;">priorityclass.scheduling.k8s.io/vitess</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span></span>
<span class="line"><span style="color:#B392F0;">priorityclass.scheduling.k8s.io/vitess-operator-control-plane</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span></span>
<span class="line"><span style="color:#B392F0;">deployment.apps/vitess-operator</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#cd vitess-release-8.0/examples/operator/</span></span>
<span class="line"><span style="color:#6A737D;">#kubectl apply -f operator.yaml  -nxzq</span></span>
<span class="line"><span style="color:#6F42C1;">customresourcedefinition.apiextensions.k8s.io/etcdlockservers.planetscale.com</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span></span>
<span class="line"><span style="color:#6F42C1;">customresourcedefinition.apiextensions.k8s.io/vitessbackups.planetscale.com</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span></span>
<span class="line"><span style="color:#6F42C1;">customresourcedefinition.apiextensions.k8s.io/vitessbackupstorages.planetscale.com</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span></span>
<span class="line"><span style="color:#6F42C1;">customresourcedefinition.apiextensions.k8s.io/vitesscells.planetscale.com</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span></span>
<span class="line"><span style="color:#6F42C1;">customresourcedefinition.apiextensions.k8s.io/vitessclusters.planetscale.com</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span></span>
<span class="line"><span style="color:#6F42C1;">customresourcedefinition.apiextensions.k8s.io/vitesskeyspaces.planetscale.com</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span></span>
<span class="line"><span style="color:#6F42C1;">customresourcedefinition.apiextensions.k8s.io/vitessshards.planetscale.com</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span></span>
<span class="line"><span style="color:#6F42C1;">serviceaccount/vitess-operator</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span></span>
<span class="line"><span style="color:#6F42C1;">role.rbac.authorization.k8s.io/vitess-operator</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span></span>
<span class="line"><span style="color:#6F42C1;">rolebinding.rbac.authorization.k8s.io/vitess-operator</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span></span>
<span class="line"><span style="color:#6F42C1;">priorityclass.scheduling.k8s.io/vitess</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span></span>
<span class="line"><span style="color:#6F42C1;">priorityclass.scheduling.k8s.io/vitess-operator-control-plane</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span></span>
<span class="line"><span style="color:#6F42C1;">deployment.apps/vitess-operator</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span></span></code></pre></div><pre><code>从部署的打印信息来看，operator在部署时创建了一系列crd资源、权限权限、调度优先级资源，其运行实例是个deployment.
</code></pre><h2 id="创建vitess集群" tabindex="-1">创建Vitess集群 <a class="header-anchor" href="#创建vitess集群" aria-label="Permalink to &quot;创建Vitess集群&quot;">​</a></h2><p>从项目自带的vitess相关的yaml信息，可以创建出一个初始化的vitess集群。</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#kubectl apply -f 101_initial_cluster.yaml -nxzq</span></span>
<span class="line"><span style="color:#B392F0;">vitesscluster.planetscale.com/example</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span></span>
<span class="line"><span style="color:#B392F0;">secret/example-cluster-config</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#kubectl apply -f 101_initial_cluster.yaml -nxzq</span></span>
<span class="line"><span style="color:#6F42C1;">vitesscluster.planetscale.com/example</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span></span>
<span class="line"><span style="color:#6F42C1;">secret/example-cluster-config</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span></span></code></pre></div><p>获取此刻vitess相关资源信息如下：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#sh get_resoure.sh</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                                                 </span><span style="color:#9ECBFF;">READY</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">RESTARTS</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">AGE</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">IP</span><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">NODE</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">NOMINATED</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">NODE</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">READINESS</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">GATES</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-etcd-faf13de3-1</span><span style="color:#E1E4E8;">                          </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.179</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-etcd-faf13de3-2</span><span style="color:#E1E4E8;">                          </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.135</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-etcd-faf13de3-3</span><span style="color:#E1E4E8;">                          </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.176</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-vttablet-zone1-2469782763-bfadd780</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">/3</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.149</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-vttablet-zone1-2548885007-46a852d0</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">/3</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.182</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-zone1-vtctld-1d4dcad0-cf87d58cb-r2cvg</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.185</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-zone1-vtgate-bc6cde92-685d69cc5c-4w54k</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.140</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/vitess-operator-6b495ddbb-cq988</span><span style="color:#E1E4E8;">                  </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">2</span><span style="color:#9ECBFF;">d21h</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.248</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                                    </span><span style="color:#9ECBFF;">TYPE</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">CLUSTER-IP</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">EXTERNAL-IP</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">PORT</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">S</span><span style="color:#E1E4E8;">)                        </span><span style="color:#9ECBFF;">AGE</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">SELECTOR</span></span>
<span class="line"><span style="color:#B392F0;">service/example-etcd-faf13de3-client</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.97</span><span style="color:#9ECBFF;">.55.121</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">2379</span><span style="color:#9ECBFF;">/TCP</span><span style="color:#E1E4E8;">                       </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">etcd.planetscale.com/lockserver=example-etcd-faf13de3</span></span>
<span class="line"><span style="color:#B392F0;">service/example-etcd-faf13de3-peer</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">None</span><span style="color:#E1E4E8;">              </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">2380</span><span style="color:#9ECBFF;">/TCP</span><span style="color:#E1E4E8;">                       </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">etcd.planetscale.com/lockserver=example-etcd-faf13de3</span></span>
<span class="line"><span style="color:#B392F0;">service/example-vtctld-625ee430</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.99</span><span style="color:#9ECBFF;">.245.244</span><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">15000</span><span style="color:#9ECBFF;">/TCP,15999/TCP</span><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">planetscale.com/cluster=example,planetscale.com/component=vtctld</span></span>
<span class="line"><span style="color:#B392F0;">service/example-vtgate-ae7df4b6</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.102</span><span style="color:#9ECBFF;">.28.49</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">15000</span><span style="color:#9ECBFF;">/TCP,15999/TCP,3306/TCP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">planetscale.com/cluster=example,planetscale.com/component=vtgate</span></span>
<span class="line"><span style="color:#B392F0;">service/example-vttablet-08646a59</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">None</span><span style="color:#E1E4E8;">              </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">15000</span><span style="color:#9ECBFF;">/TCP,15999/TCP,9104/TCP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">planetscale.com/cluster=example,planetscale.com/component=vttablet</span></span>
<span class="line"><span style="color:#B392F0;">service/example-zone1-vtgate-bc6cde92</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.106</span><span style="color:#9ECBFF;">.170.227</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">15000</span><span style="color:#9ECBFF;">/TCP,15999/TCP,3306/TCP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">planetscale.com/cell=zone1,planetscale.com/cluster=example,planetscale.com/component=vtgate</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                                                               </span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">VOLUME</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">CAPACITY</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">ACCESS</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MODES</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">STORAGECLASS</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">AGE</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">VOLUMEMODE</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-etcd-faf13de3-1</span><span style="color:#E1E4E8;">                      </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-12</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-etcd-faf13de3-2</span><span style="color:#E1E4E8;">                      </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-11</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-etcd-faf13de3-3</span><span style="color:#E1E4E8;">                      </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-13</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-vttablet-zone1-2469782763-bfadd780</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-2</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-vttablet-zone1-2548885007-46a852d0</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-9</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Filesystem</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#sh get_resoure.sh</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                                                 </span><span style="color:#032F62;">READY</span><span style="color:#24292E;">   </span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">    </span><span style="color:#032F62;">RESTARTS</span><span style="color:#24292E;">   </span><span style="color:#032F62;">AGE</span><span style="color:#24292E;">     </span><span style="color:#032F62;">IP</span><span style="color:#24292E;">                </span><span style="color:#032F62;">NODE</span><span style="color:#24292E;">      </span><span style="color:#032F62;">NOMINATED</span><span style="color:#24292E;"> </span><span style="color:#032F62;">NODE</span><span style="color:#24292E;">   </span><span style="color:#032F62;">READINESS</span><span style="color:#24292E;"> </span><span style="color:#032F62;">GATES</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-etcd-faf13de3-1</span><span style="color:#24292E;">                          </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">100</span><span style="color:#032F62;">s</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.179</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-etcd-faf13de3-2</span><span style="color:#24292E;">                          </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">100</span><span style="color:#032F62;">s</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.135</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-etcd-faf13de3-3</span><span style="color:#24292E;">                          </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">100</span><span style="color:#032F62;">s</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.176</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-vttablet-zone1-2469782763-bfadd780</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">/3</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">100</span><span style="color:#032F62;">s</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.149</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-vttablet-zone1-2548885007-46a852d0</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">/3</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">100</span><span style="color:#032F62;">s</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.182</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-zone1-vtctld-1d4dcad0-cf87d58cb-r2cvg</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">100</span><span style="color:#032F62;">s</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.185</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-zone1-vtgate-bc6cde92-685d69cc5c-4w54k</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">100</span><span style="color:#032F62;">s</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.140</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/vitess-operator-6b495ddbb-cq988</span><span style="color:#24292E;">                  </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">2</span><span style="color:#032F62;">d21h</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.248</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                                    </span><span style="color:#032F62;">TYPE</span><span style="color:#24292E;">        </span><span style="color:#032F62;">CLUSTER-IP</span><span style="color:#24292E;">        </span><span style="color:#032F62;">EXTERNAL-IP</span><span style="color:#24292E;">   </span><span style="color:#032F62;">PORT</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">S</span><span style="color:#24292E;">)                        </span><span style="color:#032F62;">AGE</span><span style="color:#24292E;">    </span><span style="color:#032F62;">SELECTOR</span></span>
<span class="line"><span style="color:#6F42C1;">service/example-etcd-faf13de3-client</span><span style="color:#24292E;">    </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.97</span><span style="color:#032F62;">.55.121</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">2379</span><span style="color:#032F62;">/TCP</span><span style="color:#24292E;">                       </span><span style="color:#005CC5;">100</span><span style="color:#032F62;">s</span><span style="color:#24292E;">   </span><span style="color:#032F62;">etcd.planetscale.com/lockserver=example-etcd-faf13de3</span></span>
<span class="line"><span style="color:#6F42C1;">service/example-etcd-faf13de3-peer</span><span style="color:#24292E;">      </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#032F62;">None</span><span style="color:#24292E;">              </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">2380</span><span style="color:#032F62;">/TCP</span><span style="color:#24292E;">                       </span><span style="color:#005CC5;">100</span><span style="color:#032F62;">s</span><span style="color:#24292E;">   </span><span style="color:#032F62;">etcd.planetscale.com/lockserver=example-etcd-faf13de3</span></span>
<span class="line"><span style="color:#6F42C1;">service/example-vtctld-625ee430</span><span style="color:#24292E;">         </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.99</span><span style="color:#032F62;">.245.244</span><span style="color:#24292E;">    </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">15000</span><span style="color:#032F62;">/TCP,15999/TCP</span><span style="color:#24292E;">            </span><span style="color:#005CC5;">100</span><span style="color:#032F62;">s</span><span style="color:#24292E;">   </span><span style="color:#032F62;">planetscale.com/cluster=example,planetscale.com/component=vtctld</span></span>
<span class="line"><span style="color:#6F42C1;">service/example-vtgate-ae7df4b6</span><span style="color:#24292E;">         </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.102</span><span style="color:#032F62;">.28.49</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">15000</span><span style="color:#032F62;">/TCP,15999/TCP,3306/TCP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">100</span><span style="color:#032F62;">s</span><span style="color:#24292E;">   </span><span style="color:#032F62;">planetscale.com/cluster=example,planetscale.com/component=vtgate</span></span>
<span class="line"><span style="color:#6F42C1;">service/example-vttablet-08646a59</span><span style="color:#24292E;">       </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#032F62;">None</span><span style="color:#24292E;">              </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">15000</span><span style="color:#032F62;">/TCP,15999/TCP,9104/TCP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">100</span><span style="color:#032F62;">s</span><span style="color:#24292E;">   </span><span style="color:#032F62;">planetscale.com/cluster=example,planetscale.com/component=vttablet</span></span>
<span class="line"><span style="color:#6F42C1;">service/example-zone1-vtgate-bc6cde92</span><span style="color:#24292E;">   </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.106</span><span style="color:#032F62;">.170.227</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">15000</span><span style="color:#032F62;">/TCP,15999/TCP,3306/TCP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">100</span><span style="color:#032F62;">s</span><span style="color:#24292E;">   </span><span style="color:#032F62;">planetscale.com/cell=zone1,planetscale.com/cluster=example,planetscale.com/component=vtgate</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                                                               </span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">   </span><span style="color:#032F62;">VOLUME</span><span style="color:#24292E;">           </span><span style="color:#032F62;">CAPACITY</span><span style="color:#24292E;">   </span><span style="color:#032F62;">ACCESS</span><span style="color:#24292E;"> </span><span style="color:#032F62;">MODES</span><span style="color:#24292E;">   </span><span style="color:#032F62;">STORAGECLASS</span><span style="color:#24292E;">   </span><span style="color:#032F62;">AGE</span><span style="color:#24292E;">    </span><span style="color:#032F62;">VOLUMEMODE</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-etcd-faf13de3-1</span><span style="color:#24292E;">                      </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-12</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">100</span><span style="color:#032F62;">s</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-etcd-faf13de3-2</span><span style="color:#24292E;">                      </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-11</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">100</span><span style="color:#032F62;">s</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-etcd-faf13de3-3</span><span style="color:#24292E;">                      </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-13</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">100</span><span style="color:#032F62;">s</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-vttablet-zone1-2469782763-bfadd780</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-2</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">100</span><span style="color:#032F62;">s</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-vttablet-zone1-2548885007-46a852d0</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-9</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">100</span><span style="color:#032F62;">s</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Filesystem</span></span></code></pre></div><p>从vitess创建完成的资源信息可见，vitess集群部署时会有2个vttablet的实例，和3个etcd的实例，且这五个实例各自单独挂载一份local-pv.</p><p>下图为在vtvtld提供的可视化界面上得到的信息，两个vttablet实例是主备关系： <img src="`+o+`" alt="image.png"></p><p>设置vtctlclient(release发布获取)和mysql以便于查看数据库信息：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">alias</span><span style="color:#E1E4E8;"> vtctlclient</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;./vtctlclient -server=$(</span><span style="color:#B392F0;">kubectl</span><span style="color:#9ECBFF;"> get svc </span><span style="color:#79B8FF;">-nxzq</span><span style="color:#9ECBFF;"> </span><span style="color:#F97583;">|</span><span style="color:#9ECBFF;"> </span><span style="color:#B392F0;">grep</span><span style="color:#9ECBFF;"> example-vtctld-625ee430 </span><span style="color:#F97583;">|</span><span style="color:#9ECBFF;"> </span><span style="color:#B392F0;">awk</span><span style="color:#9ECBFF;"> &#39;{print $3}&#39;):15999&quot;</span></span>
<span class="line"><span style="color:#F97583;">alias</span><span style="color:#E1E4E8;"> mysql</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;mysql -h $(</span><span style="color:#B392F0;">kubectl</span><span style="color:#9ECBFF;"> get svc </span><span style="color:#79B8FF;">-nxzq</span><span style="color:#9ECBFF;"> </span><span style="color:#F97583;">|</span><span style="color:#9ECBFF;"> </span><span style="color:#B392F0;">grep</span><span style="color:#9ECBFF;"> example-zone1-vtgate-bc6cde92 </span><span style="color:#F97583;">|</span><span style="color:#9ECBFF;"> </span><span style="color:#B392F0;">awk</span><span style="color:#9ECBFF;"> &#39;{print $3}&#39;) -P 3306 -u user&quot;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">alias</span><span style="color:#24292E;"> vtctlclient</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;./vtctlclient -server=$(</span><span style="color:#6F42C1;">kubectl</span><span style="color:#032F62;"> get svc </span><span style="color:#005CC5;">-nxzq</span><span style="color:#032F62;"> </span><span style="color:#D73A49;">|</span><span style="color:#032F62;"> </span><span style="color:#6F42C1;">grep</span><span style="color:#032F62;"> example-vtctld-625ee430 </span><span style="color:#D73A49;">|</span><span style="color:#032F62;"> </span><span style="color:#6F42C1;">awk</span><span style="color:#032F62;"> &#39;{print $3}&#39;):15999&quot;</span></span>
<span class="line"><span style="color:#D73A49;">alias</span><span style="color:#24292E;"> mysql</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;mysql -h $(</span><span style="color:#6F42C1;">kubectl</span><span style="color:#032F62;"> get svc </span><span style="color:#005CC5;">-nxzq</span><span style="color:#032F62;"> </span><span style="color:#D73A49;">|</span><span style="color:#032F62;"> </span><span style="color:#6F42C1;">grep</span><span style="color:#032F62;"> example-zone1-vtgate-bc6cde92 </span><span style="color:#D73A49;">|</span><span style="color:#032F62;"> </span><span style="color:#6F42C1;">awk</span><span style="color:#032F62;"> &#39;{print $3}&#39;) -P 3306 -u user&quot;</span></span></code></pre></div><p>设置Schema,此处操作是在commerce的keyspace中创建了三张表(product,customer和corder)并设置schema：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">vtctlclient</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ApplySchema</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-sql=</span><span style="color:#9ECBFF;">&quot;$(</span><span style="color:#B392F0;">cat</span><span style="color:#9ECBFF;"> create_commerce_schema.sql)&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">commerce</span></span>
<span class="line"><span style="color:#B392F0;">vtctlclient</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ApplyVSchema</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-vschema=</span><span style="color:#9ECBFF;">&quot;$(</span><span style="color:#B392F0;">cat</span><span style="color:#9ECBFF;"> vschema_commerce_initial.json)&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">commerce</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">vtctlclient</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ApplySchema</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-sql=</span><span style="color:#032F62;">&quot;$(</span><span style="color:#6F42C1;">cat</span><span style="color:#032F62;"> create_commerce_schema.sql)&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">commerce</span></span>
<span class="line"><span style="color:#6F42C1;">vtctlclient</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ApplyVSchema</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-vschema=</span><span style="color:#032F62;">&quot;$(</span><span style="color:#6F42C1;">cat</span><span style="color:#032F62;"> vschema_commerce_initial.json)&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">commerce</span></span></code></pre></div><p>至此，即完成了vitess集群的初始化操作。</p><h2 id="拆分键空间-垂直分库" tabindex="-1">拆分键空间(垂直分库) <a class="header-anchor" href="#拆分键空间-垂直分库" aria-label="Permalink to &quot;拆分键空间(垂直分库)&quot;">​</a></h2><p>将commerce的keyspace中的三张表进行拆分，使product单独一个keyspace,而customer和corder在另一个名为customer的keyspace.</p><h3 id="初始化commerce的keyspace" tabindex="-1">初始化commerce的keyspace <a class="header-anchor" href="#初始化commerce的keyspace" aria-label="Permalink to &quot;初始化commerce的keyspace&quot;">​</a></h3><p>初始化commerce内容，通过如下指令向commerce的keyspace中插入数据：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#cat ../common/insert_commerce_data.sql</span></span>
<span class="line"><span style="color:#B392F0;">insert</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">into</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">customer</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">email</span><span style="color:#E1E4E8;">) </span><span style="color:#9ECBFF;">values</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">&#39;alice@domain.com&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#B392F0;">insert</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">into</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">customer</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">email</span><span style="color:#E1E4E8;">) </span><span style="color:#9ECBFF;">values</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">&#39;bob@domain.com&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#B392F0;">insert</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">into</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">customer</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">email</span><span style="color:#E1E4E8;">) </span><span style="color:#9ECBFF;">values</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">&#39;charlie@domain.com&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#B392F0;">insert</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">into</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">customer</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">email</span><span style="color:#E1E4E8;">) </span><span style="color:#9ECBFF;">values</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">&#39;dan@domain.com&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#B392F0;">insert</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">into</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">customer</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">email</span><span style="color:#E1E4E8;">) </span><span style="color:#9ECBFF;">values</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">&#39;eve@domain.com&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#B392F0;">insert</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">into</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">product</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">sku,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">description,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">price</span><span style="color:#E1E4E8;">) </span><span style="color:#9ECBFF;">values</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">&#39;SKU-1001&#39;</span><span style="color:#B392F0;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;Monitor&#39;,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#B392F0;">insert</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">into</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">product</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">sku,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">description,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">price</span><span style="color:#E1E4E8;">) </span><span style="color:#9ECBFF;">values</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">&#39;SKU-1002&#39;</span><span style="color:#B392F0;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;Keyboard&#39;,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#B392F0;">insert</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">into</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">corder</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">customer_id,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">sku,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">price</span><span style="color:#E1E4E8;">) </span><span style="color:#9ECBFF;">values</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">1,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;SKU-1001&#39;,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#B392F0;">insert</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">into</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">corder</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">customer_id,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">sku,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">price</span><span style="color:#E1E4E8;">) </span><span style="color:#9ECBFF;">values</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">2,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;SKU-1002&#39;,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#B392F0;">insert</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">into</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">corder</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">customer_id,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">sku,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">price</span><span style="color:#E1E4E8;">) </span><span style="color:#9ECBFF;">values</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">3,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;SKU-1002&#39;,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#B392F0;">insert</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">into</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">corder</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">customer_id,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">sku,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">price</span><span style="color:#E1E4E8;">) </span><span style="color:#9ECBFF;">values</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">4,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;SKU-1002&#39;,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#B392F0;">insert</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">into</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">corder</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">customer_id,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">sku,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">price</span><span style="color:#E1E4E8;">) </span><span style="color:#9ECBFF;">values</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">5,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;SKU-1002&#39;,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#mysql &lt; ../common/insert_commerce_data.sql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#mysql --table &lt; select_commerce_data.sql</span></span>
<span class="line"><span style="color:#B392F0;">Using</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">commerce</span></span>
<span class="line"><span style="color:#B392F0;">Customer</span></span>
<span class="line"><span style="color:#B392F0;">+-------------+--------------------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">customer_id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">email</span><span style="color:#E1E4E8;">              </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+-------------+--------------------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">alice@domain.com</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">bob@domain.com</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">charlie@domain.com</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">4</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">dan@domain.com</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">5</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">eve@domain.com</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+-------------+--------------------+</span></span>
<span class="line"><span style="color:#B392F0;">Product</span></span>
<span class="line"><span style="color:#B392F0;">+----------+-------------+-------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">sku</span><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">description</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">price</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+----------+-------------+-------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SKU-1001</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Monitor</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">100</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SKU-1002</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Keyboard</span><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">30</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+----------+-------------+-------+</span></span>
<span class="line"><span style="color:#B392F0;">COrder</span></span>
<span class="line"><span style="color:#B392F0;">+----------+-------------+----------+-------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">order_id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">customer_id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">sku</span><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">price</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+----------+-------------+----------+-------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SKU-1001</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">100</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SKU-1002</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">30</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SKU-1002</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">30</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">4</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">4</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SKU-1002</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">30</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">5</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">5</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SKU-1002</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">30</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+----------+-------------+----------+-------+</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#cat ../common/insert_commerce_data.sql</span></span>
<span class="line"><span style="color:#6F42C1;">insert</span><span style="color:#24292E;"> </span><span style="color:#032F62;">into</span><span style="color:#24292E;"> </span><span style="color:#032F62;">customer</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">email</span><span style="color:#24292E;">) </span><span style="color:#032F62;">values</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">&#39;alice@domain.com&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6F42C1;">insert</span><span style="color:#24292E;"> </span><span style="color:#032F62;">into</span><span style="color:#24292E;"> </span><span style="color:#032F62;">customer</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">email</span><span style="color:#24292E;">) </span><span style="color:#032F62;">values</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">&#39;bob@domain.com&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6F42C1;">insert</span><span style="color:#24292E;"> </span><span style="color:#032F62;">into</span><span style="color:#24292E;"> </span><span style="color:#032F62;">customer</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">email</span><span style="color:#24292E;">) </span><span style="color:#032F62;">values</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">&#39;charlie@domain.com&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6F42C1;">insert</span><span style="color:#24292E;"> </span><span style="color:#032F62;">into</span><span style="color:#24292E;"> </span><span style="color:#032F62;">customer</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">email</span><span style="color:#24292E;">) </span><span style="color:#032F62;">values</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">&#39;dan@domain.com&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6F42C1;">insert</span><span style="color:#24292E;"> </span><span style="color:#032F62;">into</span><span style="color:#24292E;"> </span><span style="color:#032F62;">customer</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">email</span><span style="color:#24292E;">) </span><span style="color:#032F62;">values</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">&#39;eve@domain.com&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6F42C1;">insert</span><span style="color:#24292E;"> </span><span style="color:#032F62;">into</span><span style="color:#24292E;"> </span><span style="color:#032F62;">product</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">sku,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">description,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">price</span><span style="color:#24292E;">) </span><span style="color:#032F62;">values</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">&#39;SKU-1001&#39;</span><span style="color:#6F42C1;">,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;Monitor&#39;,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">100</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6F42C1;">insert</span><span style="color:#24292E;"> </span><span style="color:#032F62;">into</span><span style="color:#24292E;"> </span><span style="color:#032F62;">product</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">sku,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">description,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">price</span><span style="color:#24292E;">) </span><span style="color:#032F62;">values</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">&#39;SKU-1002&#39;</span><span style="color:#6F42C1;">,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;Keyboard&#39;,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">30</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6F42C1;">insert</span><span style="color:#24292E;"> </span><span style="color:#032F62;">into</span><span style="color:#24292E;"> </span><span style="color:#032F62;">corder</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">customer_id,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">sku,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">price</span><span style="color:#24292E;">) </span><span style="color:#032F62;">values</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">1,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;SKU-1001&#39;,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">100</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6F42C1;">insert</span><span style="color:#24292E;"> </span><span style="color:#032F62;">into</span><span style="color:#24292E;"> </span><span style="color:#032F62;">corder</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">customer_id,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">sku,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">price</span><span style="color:#24292E;">) </span><span style="color:#032F62;">values</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">2,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;SKU-1002&#39;,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">30</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6F42C1;">insert</span><span style="color:#24292E;"> </span><span style="color:#032F62;">into</span><span style="color:#24292E;"> </span><span style="color:#032F62;">corder</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">customer_id,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">sku,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">price</span><span style="color:#24292E;">) </span><span style="color:#032F62;">values</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">3,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;SKU-1002&#39;,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">30</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6F42C1;">insert</span><span style="color:#24292E;"> </span><span style="color:#032F62;">into</span><span style="color:#24292E;"> </span><span style="color:#032F62;">corder</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">customer_id,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">sku,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">price</span><span style="color:#24292E;">) </span><span style="color:#032F62;">values</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">4,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;SKU-1002&#39;,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">30</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6F42C1;">insert</span><span style="color:#24292E;"> </span><span style="color:#032F62;">into</span><span style="color:#24292E;"> </span><span style="color:#032F62;">corder</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">customer_id,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">sku,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">price</span><span style="color:#24292E;">) </span><span style="color:#032F62;">values</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">5,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;SKU-1002&#39;,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">30</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#mysql &lt; ../common/insert_commerce_data.sql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#mysql --table &lt; select_commerce_data.sql</span></span>
<span class="line"><span style="color:#6F42C1;">Using</span><span style="color:#24292E;"> </span><span style="color:#032F62;">commerce</span></span>
<span class="line"><span style="color:#6F42C1;">Customer</span></span>
<span class="line"><span style="color:#6F42C1;">+-------------+--------------------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">customer_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">email</span><span style="color:#24292E;">              </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+-------------+--------------------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">alice@domain.com</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">bob@domain.com</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">3</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">charlie@domain.com</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">4</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">dan@domain.com</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">5</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">eve@domain.com</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+-------------+--------------------+</span></span>
<span class="line"><span style="color:#6F42C1;">Product</span></span>
<span class="line"><span style="color:#6F42C1;">+----------+-------------+-------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">sku</span><span style="color:#24292E;">      </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">description</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">price</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+----------+-------------+-------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SKU-1001</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Monitor</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">   </span><span style="color:#6F42C1;">100</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SKU-1002</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Keyboard</span><span style="color:#24292E;">    </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">    </span><span style="color:#6F42C1;">30</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+----------+-------------+-------+</span></span>
<span class="line"><span style="color:#6F42C1;">COrder</span></span>
<span class="line"><span style="color:#6F42C1;">+----------+-------------+----------+-------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">order_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">customer_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">sku</span><span style="color:#24292E;">      </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">price</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+----------+-------------+----------+-------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">        </span><span style="color:#6F42C1;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SKU-1001</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">   </span><span style="color:#6F42C1;">100</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">        </span><span style="color:#6F42C1;">2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SKU-1002</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">    </span><span style="color:#6F42C1;">30</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">        </span><span style="color:#6F42C1;">3</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">3</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SKU-1002</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">    </span><span style="color:#6F42C1;">30</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">        </span><span style="color:#6F42C1;">4</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">4</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SKU-1002</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">    </span><span style="color:#6F42C1;">30</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">        </span><span style="color:#6F42C1;">5</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">5</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SKU-1002</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">    </span><span style="color:#6F42C1;">30</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+----------+-------------+----------+-------+</span></span></code></pre></div><p>查看vitess的tablets信息，可知当前运行两个tablets实例：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># echo &quot;show vitess_tablets;&quot; | mysql --table</span></span>
<span class="line"><span style="color:#B392F0;">+-------+----------+-------+------------+---------+------------------+-----------------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Cell</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Keyspace</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Shard</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">TabletType</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">State</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Alias</span><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Hostname</span><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+-------+----------+-------+------------+---------+------------------+-----------------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">commerce</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">MASTER</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SERVING</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1-2548885007</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">101.244.217.182</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">commerce</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">REPLICA</span><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SERVING</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1-2469782763</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">101.244.217.149</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+-------+----------+-------+------------+---------+------------------+-----------------+</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># echo &quot;show vitess_tablets;&quot; | mysql --table</span></span>
<span class="line"><span style="color:#6F42C1;">+-------+----------+-------+------------+---------+------------------+-----------------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Cell</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Keyspace</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Shard</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TabletType</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">State</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Alias</span><span style="color:#24292E;">            </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Hostname</span><span style="color:#24292E;">        </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+-------+----------+-------+------------+---------+------------------+-----------------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">commerce</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MASTER</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SERVING</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1-2548885007</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">101.244.217.182</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">commerce</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">REPLICA</span><span style="color:#24292E;">    </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SERVING</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1-2469782763</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">101.244.217.149</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+-------+----------+-------+------------+---------+------------------+-----------------+</span></span></code></pre></div><h3 id="创建新的keyspace" tabindex="-1">创建新的keyspace <a class="header-anchor" href="#创建新的keyspace" aria-label="Permalink to &quot;创建新的keyspace&quot;">​</a></h3><p>创建新的名为customer的keyspace:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#kubectl apply -f 201_customer_tablets.yaml -nxzq</span></span>
<span class="line"><span style="color:#B392F0;">vitesscluster.planetscale.com/example</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">configured</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#kubectl apply -f 201_customer_tablets.yaml -nxzq</span></span>
<span class="line"><span style="color:#6F42C1;">vitesscluster.planetscale.com/example</span><span style="color:#24292E;"> </span><span style="color:#032F62;">configured</span></span></code></pre></div><p>201_customer_tablets.yaml和101_initial_cluster.yaml相比,多出如下信息：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">keyspaces:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">……</span></span>
<span class="line"><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">name:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">customer</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">turndownPolicy:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Immediate</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">partitionings:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">equal:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">parts:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">shardTemplate:</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">databaseInitScriptSecret:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">name:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">example-cluster-config</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">key:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">init_db.sql</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">replication:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">enforceSemiSync:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">tabletPools:</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cell:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zone1</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">replica</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">replicas:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">vttablet:</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#B392F0;">extraFlags:</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#B392F0;">db_charset:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">utf8mb4</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#B392F0;">resources:</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#B392F0;">requests:</span></span>
<span class="line"><span style="color:#E1E4E8;">                  </span><span style="color:#B392F0;">cpu:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">m</span></span>
<span class="line"><span style="color:#E1E4E8;">                  </span><span style="color:#B392F0;">memory:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">256</span><span style="color:#9ECBFF;">Mi</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">mysqld:</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#B392F0;">resources:</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#B392F0;">requests:</span></span>
<span class="line"><span style="color:#E1E4E8;">                  </span><span style="color:#B392F0;">cpu:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">m</span></span>
<span class="line"><span style="color:#E1E4E8;">                  </span><span style="color:#B392F0;">memory:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">256</span><span style="color:#9ECBFF;">Mi</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">dataVolumeClaimTemplate:</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#B392F0;">accessModes:</span><span style="color:#E1E4E8;"> [</span><span style="color:#9ECBFF;">&quot;ReadWriteOnce&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#B392F0;">resources:</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#B392F0;">requests:</span></span>
<span class="line"><span style="color:#E1E4E8;">                  </span><span style="color:#B392F0;">storage:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">keyspaces:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">……</span></span>
<span class="line"><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">name:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">customer</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">turndownPolicy:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Immediate</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">partitionings:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">equal:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">parts:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">shardTemplate:</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">databaseInitScriptSecret:</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">name:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">example-cluster-config</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">key:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">init_db.sql</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">replication:</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">enforceSemiSync:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">false</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">tabletPools:</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cell:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zone1</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">type</span><span style="color:#24292E;">: </span><span style="color:#032F62;">replica</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">replicas:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">vttablet:</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#6F42C1;">extraFlags:</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6F42C1;">db_charset:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">utf8mb4</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#6F42C1;">resources:</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6F42C1;">requests:</span></span>
<span class="line"><span style="color:#24292E;">                  </span><span style="color:#6F42C1;">cpu:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">100</span><span style="color:#032F62;">m</span></span>
<span class="line"><span style="color:#24292E;">                  </span><span style="color:#6F42C1;">memory:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">256</span><span style="color:#032F62;">Mi</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">mysqld:</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#6F42C1;">resources:</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6F42C1;">requests:</span></span>
<span class="line"><span style="color:#24292E;">                  </span><span style="color:#6F42C1;">cpu:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">100</span><span style="color:#032F62;">m</span></span>
<span class="line"><span style="color:#24292E;">                  </span><span style="color:#6F42C1;">memory:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">256</span><span style="color:#032F62;">Mi</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">dataVolumeClaimTemplate:</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#6F42C1;">accessModes:</span><span style="color:#24292E;"> [</span><span style="color:#032F62;">&quot;ReadWriteOnce&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#6F42C1;">resources:</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6F42C1;">requests:</span></span>
<span class="line"><span style="color:#24292E;">                  </span><span style="color:#6F42C1;">storage:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span></span></code></pre></div><p>更新完成后，重新获取资源如下：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#sh get_resoure.sh</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                                                 </span><span style="color:#9ECBFF;">READY</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">RESTARTS</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">AGE</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">IP</span><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">NODE</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">NOMINATED</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">NODE</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">READINESS</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">GATES</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-etcd-faf13de3-1</span><span style="color:#E1E4E8;">                          </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">59</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.179</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-etcd-faf13de3-2</span><span style="color:#E1E4E8;">                          </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">59</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.135</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-etcd-faf13de3-3</span><span style="color:#E1E4E8;">                          </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">59</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.176</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-vttablet-zone1-1250593518-17c58396</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">/3</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">m37s</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.239</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-vttablet-zone1-2469782763-bfadd780</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">/3</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">59</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.149</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-vttablet-zone1-2548885007-46a852d0</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">/3</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">59</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.182</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-vttablet-zone1-3778123133-6f4ed5fc</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">/3</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">m37s</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.241</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-zone1-vtctld-1d4dcad0-cf87d58cb-r2cvg</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">59</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.185</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-zone1-vtgate-bc6cde92-685d69cc5c-4w54k</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">59</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.140</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/vitess-operator-6b495ddbb-cq988</span><span style="color:#E1E4E8;">                  </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">2</span><span style="color:#9ECBFF;">d22h</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.248</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                                    </span><span style="color:#9ECBFF;">TYPE</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">CLUSTER-IP</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">EXTERNAL-IP</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">PORT</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">S</span><span style="color:#E1E4E8;">)                        </span><span style="color:#9ECBFF;">AGE</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">SELECTOR</span></span>
<span class="line"><span style="color:#B392F0;">service/example-etcd-faf13de3-client</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.97</span><span style="color:#9ECBFF;">.55.121</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">2379</span><span style="color:#9ECBFF;">/TCP</span><span style="color:#E1E4E8;">                       </span><span style="color:#79B8FF;">59</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">etcd.planetscale.com/lockserver=example-etcd-faf13de3</span></span>
<span class="line"><span style="color:#B392F0;">service/example-etcd-faf13de3-peer</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">None</span><span style="color:#E1E4E8;">              </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">2380</span><span style="color:#9ECBFF;">/TCP</span><span style="color:#E1E4E8;">                       </span><span style="color:#79B8FF;">59</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">etcd.planetscale.com/lockserver=example-etcd-faf13de3</span></span>
<span class="line"><span style="color:#B392F0;">service/example-vtctld-625ee430</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.99</span><span style="color:#9ECBFF;">.245.244</span><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">15000</span><span style="color:#9ECBFF;">/TCP,15999/TCP</span><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">59</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">planetscale.com/cluster=example,planetscale.com/component=vtctld</span></span>
<span class="line"><span style="color:#B392F0;">service/example-vtgate-ae7df4b6</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.102</span><span style="color:#9ECBFF;">.28.49</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">15000</span><span style="color:#9ECBFF;">/TCP,15999/TCP,3306/TCP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">59</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">planetscale.com/cluster=example,planetscale.com/component=vtgate</span></span>
<span class="line"><span style="color:#B392F0;">service/example-vttablet-08646a59</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">None</span><span style="color:#E1E4E8;">              </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">15000</span><span style="color:#9ECBFF;">/TCP,15999/TCP,9104/TCP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">59</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">planetscale.com/cluster=example,planetscale.com/component=vttablet</span></span>
<span class="line"><span style="color:#B392F0;">service/example-zone1-vtgate-bc6cde92</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.106</span><span style="color:#9ECBFF;">.170.227</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">15000</span><span style="color:#9ECBFF;">/TCP,15999/TCP,3306/TCP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">59</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">planetscale.com/cell=zone1,planetscale.com/cluster=example,planetscale.com/component=vtgate</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                                                               </span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">VOLUME</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">CAPACITY</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">ACCESS</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MODES</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">STORAGECLASS</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">AGE</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">VOLUMEMODE</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-etcd-faf13de3-1</span><span style="color:#E1E4E8;">                      </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-12</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">59</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-etcd-faf13de3-2</span><span style="color:#E1E4E8;">                      </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-11</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">59</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-etcd-faf13de3-3</span><span style="color:#E1E4E8;">                      </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-13</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">59</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-vttablet-zone1-1250593518-17c58396</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-7</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">m37s</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-vttablet-zone1-2469782763-bfadd780</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-2</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">59</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-vttablet-zone1-2548885007-46a852d0</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-9</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">59</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-vttablet-zone1-3778123133-6f4ed5fc</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-10</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">m37s</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Filesystem</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#sh get_resoure.sh</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                                                 </span><span style="color:#032F62;">READY</span><span style="color:#24292E;">   </span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">    </span><span style="color:#032F62;">RESTARTS</span><span style="color:#24292E;">   </span><span style="color:#032F62;">AGE</span><span style="color:#24292E;">     </span><span style="color:#032F62;">IP</span><span style="color:#24292E;">                </span><span style="color:#032F62;">NODE</span><span style="color:#24292E;">      </span><span style="color:#032F62;">NOMINATED</span><span style="color:#24292E;"> </span><span style="color:#032F62;">NODE</span><span style="color:#24292E;">   </span><span style="color:#032F62;">READINESS</span><span style="color:#24292E;"> </span><span style="color:#032F62;">GATES</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-etcd-faf13de3-1</span><span style="color:#24292E;">                          </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">59</span><span style="color:#032F62;">m</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.179</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-etcd-faf13de3-2</span><span style="color:#24292E;">                          </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">59</span><span style="color:#032F62;">m</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.135</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-etcd-faf13de3-3</span><span style="color:#24292E;">                          </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">59</span><span style="color:#032F62;">m</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.176</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-vttablet-zone1-1250593518-17c58396</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">/3</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">m37s</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.239</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-vttablet-zone1-2469782763-bfadd780</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">/3</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">59</span><span style="color:#032F62;">m</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.149</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-vttablet-zone1-2548885007-46a852d0</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">/3</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">59</span><span style="color:#032F62;">m</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.182</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-vttablet-zone1-3778123133-6f4ed5fc</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">/3</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">m37s</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.241</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-zone1-vtctld-1d4dcad0-cf87d58cb-r2cvg</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">59</span><span style="color:#032F62;">m</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.185</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-zone1-vtgate-bc6cde92-685d69cc5c-4w54k</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">59</span><span style="color:#032F62;">m</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.140</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/vitess-operator-6b495ddbb-cq988</span><span style="color:#24292E;">                  </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">2</span><span style="color:#032F62;">d22h</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.248</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                                    </span><span style="color:#032F62;">TYPE</span><span style="color:#24292E;">        </span><span style="color:#032F62;">CLUSTER-IP</span><span style="color:#24292E;">        </span><span style="color:#032F62;">EXTERNAL-IP</span><span style="color:#24292E;">   </span><span style="color:#032F62;">PORT</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">S</span><span style="color:#24292E;">)                        </span><span style="color:#032F62;">AGE</span><span style="color:#24292E;">   </span><span style="color:#032F62;">SELECTOR</span></span>
<span class="line"><span style="color:#6F42C1;">service/example-etcd-faf13de3-client</span><span style="color:#24292E;">    </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.97</span><span style="color:#032F62;">.55.121</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">2379</span><span style="color:#032F62;">/TCP</span><span style="color:#24292E;">                       </span><span style="color:#005CC5;">59</span><span style="color:#032F62;">m</span><span style="color:#24292E;">   </span><span style="color:#032F62;">etcd.planetscale.com/lockserver=example-etcd-faf13de3</span></span>
<span class="line"><span style="color:#6F42C1;">service/example-etcd-faf13de3-peer</span><span style="color:#24292E;">      </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#032F62;">None</span><span style="color:#24292E;">              </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">2380</span><span style="color:#032F62;">/TCP</span><span style="color:#24292E;">                       </span><span style="color:#005CC5;">59</span><span style="color:#032F62;">m</span><span style="color:#24292E;">   </span><span style="color:#032F62;">etcd.planetscale.com/lockserver=example-etcd-faf13de3</span></span>
<span class="line"><span style="color:#6F42C1;">service/example-vtctld-625ee430</span><span style="color:#24292E;">         </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.99</span><span style="color:#032F62;">.245.244</span><span style="color:#24292E;">    </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">15000</span><span style="color:#032F62;">/TCP,15999/TCP</span><span style="color:#24292E;">            </span><span style="color:#005CC5;">59</span><span style="color:#032F62;">m</span><span style="color:#24292E;">   </span><span style="color:#032F62;">planetscale.com/cluster=example,planetscale.com/component=vtctld</span></span>
<span class="line"><span style="color:#6F42C1;">service/example-vtgate-ae7df4b6</span><span style="color:#24292E;">         </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.102</span><span style="color:#032F62;">.28.49</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">15000</span><span style="color:#032F62;">/TCP,15999/TCP,3306/TCP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">59</span><span style="color:#032F62;">m</span><span style="color:#24292E;">   </span><span style="color:#032F62;">planetscale.com/cluster=example,planetscale.com/component=vtgate</span></span>
<span class="line"><span style="color:#6F42C1;">service/example-vttablet-08646a59</span><span style="color:#24292E;">       </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#032F62;">None</span><span style="color:#24292E;">              </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">15000</span><span style="color:#032F62;">/TCP,15999/TCP,9104/TCP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">59</span><span style="color:#032F62;">m</span><span style="color:#24292E;">   </span><span style="color:#032F62;">planetscale.com/cluster=example,planetscale.com/component=vttablet</span></span>
<span class="line"><span style="color:#6F42C1;">service/example-zone1-vtgate-bc6cde92</span><span style="color:#24292E;">   </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.106</span><span style="color:#032F62;">.170.227</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">15000</span><span style="color:#032F62;">/TCP,15999/TCP,3306/TCP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">59</span><span style="color:#032F62;">m</span><span style="color:#24292E;">   </span><span style="color:#032F62;">planetscale.com/cell=zone1,planetscale.com/cluster=example,planetscale.com/component=vtgate</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                                                               </span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">   </span><span style="color:#032F62;">VOLUME</span><span style="color:#24292E;">           </span><span style="color:#032F62;">CAPACITY</span><span style="color:#24292E;">   </span><span style="color:#032F62;">ACCESS</span><span style="color:#24292E;"> </span><span style="color:#032F62;">MODES</span><span style="color:#24292E;">   </span><span style="color:#032F62;">STORAGECLASS</span><span style="color:#24292E;">   </span><span style="color:#032F62;">AGE</span><span style="color:#24292E;">     </span><span style="color:#032F62;">VOLUMEMODE</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-etcd-faf13de3-1</span><span style="color:#24292E;">                      </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-12</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">59</span><span style="color:#032F62;">m</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-etcd-faf13de3-2</span><span style="color:#24292E;">                      </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-11</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">59</span><span style="color:#032F62;">m</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-etcd-faf13de3-3</span><span style="color:#24292E;">                      </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-13</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">59</span><span style="color:#032F62;">m</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-vttablet-zone1-1250593518-17c58396</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-7</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">m37s</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-vttablet-zone1-2469782763-bfadd780</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-2</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">59</span><span style="color:#032F62;">m</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-vttablet-zone1-2548885007-46a852d0</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-9</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">59</span><span style="color:#032F62;">m</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-vttablet-zone1-3778123133-6f4ed5fc</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-10</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">m37s</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Filesystem</span></span></code></pre></div><p>相比于创建Vitess集群时的资源，多出了两个vttablet的pod和两个pvc.</p><p>查看vitess的tablets信息，可知当前运行四个tablets实例：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># echo &quot;show vitess_tablets;&quot; | mysql --table</span></span>
<span class="line"><span style="color:#B392F0;">+-------+----------+-------+------------+---------+------------------+-----------------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Cell</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Keyspace</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Shard</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">TabletType</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">State</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Alias</span><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Hostname</span><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+-------+----------+-------+------------+---------+------------------+-----------------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">commerce</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">MASTER</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SERVING</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1-2548885007</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">101.244.217.182</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">commerce</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">REPLICA</span><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SERVING</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1-2469782763</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">101.244.217.149</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">customer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">MASTER</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SERVING</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1-1250593518</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">101.244.217.239</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">customer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">REPLICA</span><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SERVING</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1-3778123133</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">101.244.217.241</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+-------+----------+-------+------------+---------+------------------+-----------------+</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># echo &quot;show vitess_tablets;&quot; | mysql --table</span></span>
<span class="line"><span style="color:#6F42C1;">+-------+----------+-------+------------+---------+------------------+-----------------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Cell</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Keyspace</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Shard</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TabletType</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">State</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Alias</span><span style="color:#24292E;">            </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Hostname</span><span style="color:#24292E;">        </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+-------+----------+-------+------------+---------+------------------+-----------------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">commerce</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MASTER</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SERVING</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1-2548885007</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">101.244.217.182</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">commerce</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">REPLICA</span><span style="color:#24292E;">    </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SERVING</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1-2469782763</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">101.244.217.149</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">customer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MASTER</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SERVING</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1-1250593518</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">101.244.217.239</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">customer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">REPLICA</span><span style="color:#24292E;">    </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SERVING</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1-3778123133</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">101.244.217.241</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+-------+----------+-------+------------+---------+------------------+-----------------+</span></span></code></pre></div><h3 id="开始移动操作" tabindex="-1">开始移动操作 <a class="header-anchor" href="#开始移动操作" aria-label="Permalink to &quot;开始移动操作&quot;">​</a></h3><p>Vitess的移动表操作实际上是复制操作，在此期间，对于数据库的读写操作无影响，通过如下指令开始移动操作：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">vtctlclient</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MoveTables</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-workflow=commerce2customer</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">commerce</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">customer</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;{&quot;customer&quot;:{}, &quot;corder&quot;:{}}&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">vtctlclient</span><span style="color:#24292E;"> </span><span style="color:#032F62;">MoveTables</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-workflow=commerce2customer</span><span style="color:#24292E;"> </span><span style="color:#032F62;">commerce</span><span style="color:#24292E;"> </span><span style="color:#032F62;">customer</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;{&quot;customer&quot;:{}, &quot;corder&quot;:{}}&#39;</span></span></code></pre></div><p>此时查看路由可发现，数据库指向customer表和corder表的操作均会分配到commerce的keyspace:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#vtctlclient GetRoutingRules commerce</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">&quot;rules&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;fromTable&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;customer&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;toTables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;commerce.customer&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;fromTable&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;customer.customer&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;toTables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;commerce.customer&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;fromTable&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;corder&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;toTables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;commerce.corder&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;fromTable&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;customer.corder&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;toTables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;commerce.corder&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  ]</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#vtctlclient GetRoutingRules commerce</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">&quot;rules&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;fromTable&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;customer&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;toTables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;commerce.customer&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;fromTable&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;customer.customer&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;toTables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;commerce.customer&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;fromTable&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;corder&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;toTables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;commerce.corder&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;fromTable&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;customer.corder&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;toTables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;commerce.corder&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  ]</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="查看移动进度" tabindex="-1">查看移动进度 <a class="header-anchor" href="#查看移动进度" aria-label="Permalink to &quot;查看移动进度&quot;">​</a></h3><p>当表的数据非常大的时候，表的移动操作会耗时较久，此时可通过如下指令查看具体进度：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">vtctlclient</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">VReplicationExec</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zone1-0000000200</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;select * from _vt.copy_state&quot;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">vtctlclient</span><span style="color:#24292E;"> </span><span style="color:#032F62;">VReplicationExec</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zone1-0000000200</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;select * from _vt.copy_state&quot;</span></span></code></pre></div><p>可通过如下指令查看表数据同步情况：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#vtctlclient VDiff customer.commerce2customer</span></span>
<span class="line"><span style="color:#B392F0;">Summary</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">for</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">corder:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{ProcessedRows:5</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MatchingRows:5</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MismatchedRows:0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ExtraRowsSource:0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ExtraRowsTarget:0}</span></span>
<span class="line"><span style="color:#B392F0;">Summary</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">for</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">customer:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{ProcessedRows:5</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MatchingRows:5</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MismatchedRows:0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ExtraRowsSource:0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ExtraRowsTarget:0}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#vtctlclient VDiff customer.commerce2customer</span></span>
<span class="line"><span style="color:#6F42C1;">Summary</span><span style="color:#24292E;"> </span><span style="color:#032F62;">for</span><span style="color:#24292E;"> </span><span style="color:#032F62;">corder:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{ProcessedRows:5</span><span style="color:#24292E;"> </span><span style="color:#032F62;">MatchingRows:5</span><span style="color:#24292E;"> </span><span style="color:#032F62;">MismatchedRows:0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ExtraRowsSource:0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ExtraRowsTarget:0}</span></span>
<span class="line"><span style="color:#6F42C1;">Summary</span><span style="color:#24292E;"> </span><span style="color:#032F62;">for</span><span style="color:#24292E;"> </span><span style="color:#032F62;">customer:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{ProcessedRows:5</span><span style="color:#24292E;"> </span><span style="color:#032F62;">MatchingRows:5</span><span style="color:#24292E;"> </span><span style="color:#032F62;">MismatchedRows:0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ExtraRowsSource:0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ExtraRowsTarget:0}</span></span></code></pre></div><h3 id="转移读取路由" tabindex="-1">转移读取路由 <a class="header-anchor" href="#转移读取路由" aria-label="Permalink to &quot;转移读取路由&quot;">​</a></h3><p>在同步好customer的keyspace数据之后,可以将对customer表和corder表的读取操作全部从commerce的keyspace转移过来并查看路由信息：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#vtctlclient SwitchReads -tablet_type=rdonly customer.commerce2customer</span></span>
<span class="line"><span style="color:#6A737D;">#vtctlclient SwitchReads -tablet_type=replica customer.commerce2customer</span></span>
<span class="line"><span style="color:#6A737D;">#vtctlclient GetRoutingRules commerce</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">&quot;rules&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;fromTable&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;customer@rdonly&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;toTables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;customer.customer&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;fromTable&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;commerce.customer@rdonly&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;toTables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;customer.customer&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;fromTable&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;customer.corder@replica&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;toTables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;customer.corder&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;fromTable&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;commerce.corder@replica&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;toTables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;customer.corder&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;fromTable&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;customer.customer@replica&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;toTables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;customer.customer&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;fromTable&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;customer&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;toTables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;commerce.customer&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;fromTable&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;customer.corder&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;toTables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;commerce.corder&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;fromTable&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;commerce.corder@rdonly&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;toTables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;customer.corder&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;fromTable&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;customer.customer@rdonly&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;toTables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;customer.customer&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;fromTable&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;corder@replica&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;toTables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;customer.corder&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;fromTable&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;commerce.customer@replica&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;toTables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;customer.customer&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;fromTable&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;customer.corder@rdonly&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;toTables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;customer.corder&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;fromTable&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;customer.customer&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;toTables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;commerce.customer&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;fromTable&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;corder&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;toTables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;commerce.corder&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;fromTable&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;corder@rdonly&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;toTables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;customer.corder&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;fromTable&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;customer@replica&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;toTables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;customer.customer&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  ]</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#vtctlclient SwitchReads -tablet_type=rdonly customer.commerce2customer</span></span>
<span class="line"><span style="color:#6A737D;">#vtctlclient SwitchReads -tablet_type=replica customer.commerce2customer</span></span>
<span class="line"><span style="color:#6A737D;">#vtctlclient GetRoutingRules commerce</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">&quot;rules&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;fromTable&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;customer@rdonly&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;toTables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;customer.customer&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;fromTable&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;commerce.customer@rdonly&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;toTables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;customer.customer&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;fromTable&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;customer.corder@replica&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;toTables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;customer.corder&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;fromTable&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;commerce.corder@replica&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;toTables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;customer.corder&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;fromTable&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;customer.customer@replica&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;toTables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;customer.customer&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;fromTable&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;customer&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;toTables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;commerce.customer&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;fromTable&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;customer.corder&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;toTables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;commerce.corder&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;fromTable&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;commerce.corder@rdonly&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;toTables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;customer.corder&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;fromTable&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;customer.customer@rdonly&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;toTables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;customer.customer&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;fromTable&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;corder@replica&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;toTables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;customer.corder&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;fromTable&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;commerce.customer@replica&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;toTables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;customer.customer&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;fromTable&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;customer.corder@rdonly&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;toTables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;customer.corder&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;fromTable&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;customer.customer&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;toTables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;commerce.customer&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;fromTable&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;corder&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;toTables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;commerce.corder&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;fromTable&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;corder@rdonly&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;toTables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;customer.corder&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;fromTable&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;customer@replica&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;toTables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;customer.customer&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  ]</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="转移写路由" tabindex="-1">转移写路由 <a class="header-anchor" href="#转移写路由" aria-label="Permalink to &quot;转移写路由&quot;">​</a></h3><p>将对customer表和corder表的写操作从commerce的keyspace转移过来并查看路由信息：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#vtctlclient SwitchWrites customer.commerce2customer</span></span>
<span class="line"><span style="color:#6A737D;">#vtctlclient GetRoutingRules commerce</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">&quot;rules&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;fromTable&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;commerce.customer&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;toTables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;customer.customer&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;fromTable&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;customer&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;toTables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;customer.customer&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;fromTable&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;commerce.corder&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;toTables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;customer.corder&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;fromTable&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;corder&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;toTables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;customer.corder&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  ]</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#vtctlclient SwitchWrites customer.commerce2customer</span></span>
<span class="line"><span style="color:#6A737D;">#vtctlclient GetRoutingRules commerce</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">&quot;rules&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;fromTable&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;commerce.customer&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;toTables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;customer.customer&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;fromTable&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;customer&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;toTables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;customer.customer&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;fromTable&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;commerce.corder&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;toTables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;customer.corder&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;fromTable&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;corder&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;toTables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;customer.corder&quot;</span></span>
<span class="line"><span style="color:#24292E;">      ]</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  ]</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>至此，vitess集群中原先commerce的keyspace中关于customer表和corder表的所有操作都将路由到新创建的customer的keyspace中，且在整个转移过程中，Vitess会自动创建一个反向工作流，将对customer表和corder表有修改的操作同步到commerce的keyspace中，因此，假如转移过程中出现了故障，原commerce的keyspace也能保证不丢失数据。</p><h3 id="丢弃源数据" tabindex="-1">丢弃源数据 <a class="header-anchor" href="#丢弃源数据" aria-label="Permalink to &quot;丢弃源数据&quot;">​</a></h3><p>在完成customer表和corder表数据转移和操作权限转移之后，需要将commerce的keyspace中的customer表和corder表移除，可通过以下指令来完成(需要将../common/select_commerce_data.sql文件中的commerce/0改为commerce/-，因为operator部署的commerce默认分片名称是-)：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">vtctlclient</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">DropSources</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">customer.commerce2customer</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#mysql --table &lt; ../common/select_commerce_data.sql</span></span>
<span class="line"><span style="color:#B392F0;">Using</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">commerce/-</span></span>
<span class="line"><span style="color:#B392F0;">Customer</span></span>
<span class="line"><span style="color:#B392F0;">ERROR</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1146</span><span style="color:#E1E4E8;"> (42S02) at line 4: vtgate: http://example-zone1-vtgate-bc6cde92-685d69cc5c-4w54k:15000/: target: commerce.-.master, used tablet: zone1-2548885007 (</span><span style="color:#B392F0;">101.244.217.182</span><span style="color:#E1E4E8;">): vttablet: rpc error: code = NotFound desc = Table </span><span style="color:#9ECBFF;">&#39;vt_commerce.customer&#39;</span><span style="color:#E1E4E8;"> doesn</span><span style="color:#9ECBFF;">&#39;t exist (errno 1146) (sqlstate 42S02) (CallerID: user): Sql: &quot;select * from customer&quot;, BindVars: {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">vtctlclient</span><span style="color:#24292E;"> </span><span style="color:#032F62;">DropSources</span><span style="color:#24292E;"> </span><span style="color:#032F62;">customer.commerce2customer</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6A737D;">#mysql --table &lt; ../common/select_commerce_data.sql</span></span>
<span class="line"><span style="color:#6F42C1;">Using</span><span style="color:#24292E;"> </span><span style="color:#032F62;">commerce/-</span></span>
<span class="line"><span style="color:#6F42C1;">Customer</span></span>
<span class="line"><span style="color:#6F42C1;">ERROR</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1146</span><span style="color:#24292E;"> (42S02) at line 4: vtgate: http://example-zone1-vtgate-bc6cde92-685d69cc5c-4w54k:15000/: target: commerce.-.master, used tablet: zone1-2548885007 (</span><span style="color:#6F42C1;">101.244.217.182</span><span style="color:#24292E;">): vttablet: rpc error: code = NotFound desc = Table </span><span style="color:#032F62;">&#39;vt_commerce.customer&#39;</span><span style="color:#24292E;"> doesn</span><span style="color:#032F62;">&#39;t exist (errno 1146) (sqlstate 42S02) (CallerID: user): Sql: &quot;select * from customer&quot;, BindVars: {}</span></span></code></pre></div><p>至此，完成了将一个keyspace中的表移动到另一个keyspace的操作。</p><h2 id="keyspace分片-水平分表" tabindex="-1">keyspace分片(水平分表) <a class="header-anchor" href="#keyspace分片-水平分表" aria-label="Permalink to &quot;keyspace分片(水平分表)&quot;">​</a></h2><p>Vitess中的每个实例可视为一个分片(shard),将单个实例数据水平拆分在Vitess中被称为重新分片(resharding)。</p><h3 id="顺序" tabindex="-1">顺序 <a class="header-anchor" href="#顺序" aria-label="Permalink to &quot;顺序&quot;">​</a></h3><p>在进行水平分表的时候，常常涉及到自增长的列，此时需要通过设置Vitess集群中的VShema来指定自增长规则，在Vitess的实现中，可使用指定表中表示顺序的列来替代自增长属性，当有数据插入时，自增长的列会从这个表示顺序的列中取出来一个值来代替自增长的值。</p><p>以下指令创建了customer_seq表和order_seq表作为sequence表并声明相应的VSchema:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#cat create_commerce_seq.sql</span></span>
<span class="line"><span style="color:#B392F0;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">table</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">customer_seq</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">id</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">int,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">next_id</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bigint,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cache</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bigint,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">primary</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">key</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">id</span><span style="color:#E1E4E8;">)) </span><span style="color:#9ECBFF;">comment</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;vitess_sequence&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#B392F0;">insert</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">into</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">customer_seq</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">id,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">next_id,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cache</span><span style="color:#E1E4E8;">) </span><span style="color:#9ECBFF;">values</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">0,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1000</span><span style="color:#9ECBFF;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#B392F0;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">table</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">order_seq</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">id</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">int,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">next_id</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bigint,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cache</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bigint,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">primary</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">key</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">id</span><span style="color:#E1E4E8;">)) </span><span style="color:#9ECBFF;">comment</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;vitess_sequence&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#B392F0;">insert</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">into</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">order_seq</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">id,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">next_id,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cache</span><span style="color:#E1E4E8;">) </span><span style="color:#9ECBFF;">values</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">0,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1000</span><span style="color:#9ECBFF;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#vtctlclient ApplySchema -sql=&quot;$(cat create_commerce_seq.sql)&quot; commerce</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#vtctlclient ApplyVSchema -vschema=&quot;$(cat vschema_commerce_seq.json)&quot; commerce</span></span>
<span class="line"><span style="color:#B392F0;">New</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">VSchema</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">object:</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">&quot;tables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">&quot;customer_seq&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;type&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;sequence&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">&quot;order_seq&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;type&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;sequence&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">&quot;product&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#B392F0;">If</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">this</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">is</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">not</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">what</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">you</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">expected,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">check</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">input</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">data</span><span style="color:#E1E4E8;"> (as </span><span style="color:#9ECBFF;">JSON</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">parsing</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">will</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">skip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">unexpected</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">fields</span><span style="color:#E1E4E8;">).</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#cat create_customer_sharded.sql</span></span>
<span class="line"><span style="color:#B392F0;">alter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">table</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">customer</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">change</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">customer_id</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">customer_id</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bigint</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">not</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">null</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#B392F0;">alter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">table</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">corder</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">change</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">order_id</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">order_id</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bigint</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">not</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">null</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#vtctlclient ApplySchema -sql=&quot;$(cat create_customer_sharded.sql)&quot; customer</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#cat create_commerce_seq.sql</span></span>
<span class="line"><span style="color:#6F42C1;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">table</span><span style="color:#24292E;"> </span><span style="color:#032F62;">customer_seq</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">id</span><span style="color:#24292E;"> </span><span style="color:#032F62;">int,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">next_id</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bigint,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cache</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bigint,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">primary</span><span style="color:#24292E;"> </span><span style="color:#032F62;">key</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">id</span><span style="color:#24292E;">)) </span><span style="color:#032F62;">comment</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;vitess_sequence&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6F42C1;">insert</span><span style="color:#24292E;"> </span><span style="color:#032F62;">into</span><span style="color:#24292E;"> </span><span style="color:#032F62;">customer_seq</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">id,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">next_id,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cache</span><span style="color:#24292E;">) </span><span style="color:#032F62;">values</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">0,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1000</span><span style="color:#032F62;">,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">100</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6F42C1;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">table</span><span style="color:#24292E;"> </span><span style="color:#032F62;">order_seq</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">id</span><span style="color:#24292E;"> </span><span style="color:#032F62;">int,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">next_id</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bigint,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cache</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bigint,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">primary</span><span style="color:#24292E;"> </span><span style="color:#032F62;">key</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">id</span><span style="color:#24292E;">)) </span><span style="color:#032F62;">comment</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;vitess_sequence&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6F42C1;">insert</span><span style="color:#24292E;"> </span><span style="color:#032F62;">into</span><span style="color:#24292E;"> </span><span style="color:#032F62;">order_seq</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">id,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">next_id,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cache</span><span style="color:#24292E;">) </span><span style="color:#032F62;">values</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">0,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1000</span><span style="color:#032F62;">,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">100</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#vtctlclient ApplySchema -sql=&quot;$(cat create_commerce_seq.sql)&quot; commerce</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#vtctlclient ApplyVSchema -vschema=&quot;$(cat vschema_commerce_seq.json)&quot; commerce</span></span>
<span class="line"><span style="color:#6F42C1;">New</span><span style="color:#24292E;"> </span><span style="color:#032F62;">VSchema</span><span style="color:#24292E;"> </span><span style="color:#032F62;">object:</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">&quot;tables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">&quot;customer_seq&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;type&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;sequence&quot;</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">&quot;order_seq&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;type&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;sequence&quot;</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">&quot;product&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#6F42C1;">If</span><span style="color:#24292E;"> </span><span style="color:#032F62;">this</span><span style="color:#24292E;"> </span><span style="color:#032F62;">is</span><span style="color:#24292E;"> </span><span style="color:#032F62;">not</span><span style="color:#24292E;"> </span><span style="color:#032F62;">what</span><span style="color:#24292E;"> </span><span style="color:#032F62;">you</span><span style="color:#24292E;"> </span><span style="color:#032F62;">expected,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">check</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">input</span><span style="color:#24292E;"> </span><span style="color:#032F62;">data</span><span style="color:#24292E;"> (as </span><span style="color:#032F62;">JSON</span><span style="color:#24292E;"> </span><span style="color:#032F62;">parsing</span><span style="color:#24292E;"> </span><span style="color:#032F62;">will</span><span style="color:#24292E;"> </span><span style="color:#032F62;">skip</span><span style="color:#24292E;"> </span><span style="color:#032F62;">unexpected</span><span style="color:#24292E;"> </span><span style="color:#032F62;">fields</span><span style="color:#24292E;">).</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#cat create_customer_sharded.sql</span></span>
<span class="line"><span style="color:#6F42C1;">alter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">table</span><span style="color:#24292E;"> </span><span style="color:#032F62;">customer</span><span style="color:#24292E;"> </span><span style="color:#032F62;">change</span><span style="color:#24292E;"> </span><span style="color:#032F62;">customer_id</span><span style="color:#24292E;"> </span><span style="color:#032F62;">customer_id</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bigint</span><span style="color:#24292E;"> </span><span style="color:#032F62;">not</span><span style="color:#24292E;"> </span><span style="color:#032F62;">null</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6F42C1;">alter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">table</span><span style="color:#24292E;"> </span><span style="color:#032F62;">corder</span><span style="color:#24292E;"> </span><span style="color:#032F62;">change</span><span style="color:#24292E;"> </span><span style="color:#032F62;">order_id</span><span style="color:#24292E;"> </span><span style="color:#032F62;">order_id</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bigint</span><span style="color:#24292E;"> </span><span style="color:#032F62;">not</span><span style="color:#24292E;"> </span><span style="color:#032F62;">null</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#vtctlclient ApplySchema -sql=&quot;$(cat create_customer_sharded.sql)&quot; customer</span></span></code></pre></div><h3 id="vindexes" tabindex="-1">Vindexes <a class="header-anchor" href="#vindexes" aria-label="Permalink to &quot;Vindexes&quot;">​</a></h3><p>Vindexes可以理解为水平分表之后的分布式索引，便于vttablet快速进行查询等操作，其根据选择的列的数据类型可以有以下选择：</p><ul><li>对于BIGINT列，请使用hash;</li><li>对于VARCHAR列，请使用unicode_loose_md5或unicode_loose_xxhash；</li><li>对于VARBINARY，使用binary_md5或xxhash.</li></ul><p>执行如下语句，应用VShema指定corder表和customer表的Vindexes和自增长规则：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#vtctlclient ApplyVSchema -vschema=&quot;$(cat vschema_customer_sharded.json)&quot; customer</span></span>
<span class="line"><span style="color:#B392F0;">New</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">VSchema</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">object:</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">&quot;sharded&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span><span style="color:#9ECBFF;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">&quot;vindexes&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">&quot;hash&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;type&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;hash&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">&quot;tables&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">&quot;corder&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;columnVindexes&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">&quot;column&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;customer_id&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">&quot;name&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;hash&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">      ],</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;autoIncrement&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;column&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;order_id&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;sequence&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;order_seq&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">&quot;customer&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;columnVindexes&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">&quot;column&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;customer_id&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">&quot;name&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;hash&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">      ],</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;autoIncrement&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;column&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;customer_id&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;sequence&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;customer_seq&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#B392F0;">If</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">this</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">is</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">not</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">what</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">you</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">expected,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">check</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">input</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">data</span><span style="color:#E1E4E8;"> (as </span><span style="color:#9ECBFF;">JSON</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">parsing</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">will</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">skip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">unexpected</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">fields</span><span style="color:#E1E4E8;">).</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#vtctlclient ApplyVSchema -vschema=&quot;$(cat vschema_customer_sharded.json)&quot; customer</span></span>
<span class="line"><span style="color:#6F42C1;">New</span><span style="color:#24292E;"> </span><span style="color:#032F62;">VSchema</span><span style="color:#24292E;"> </span><span style="color:#032F62;">object:</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">&quot;sharded&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span><span style="color:#032F62;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">&quot;vindexes&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">&quot;hash&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;type&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;hash&quot;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">&quot;tables&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">&quot;corder&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;columnVindexes&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        {</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">&quot;column&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;customer_id&quot;,</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">&quot;name&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;hash&quot;</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">      ],</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;autoIncrement&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;column&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;order_id&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;sequence&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;order_seq&quot;</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">&quot;customer&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;columnVindexes&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">        {</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">&quot;column&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;customer_id&quot;,</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">&quot;name&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;hash&quot;</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">      ],</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;autoIncrement&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;column&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;customer_id&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;sequence&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;customer_seq&quot;</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#6F42C1;">If</span><span style="color:#24292E;"> </span><span style="color:#032F62;">this</span><span style="color:#24292E;"> </span><span style="color:#032F62;">is</span><span style="color:#24292E;"> </span><span style="color:#032F62;">not</span><span style="color:#24292E;"> </span><span style="color:#032F62;">what</span><span style="color:#24292E;"> </span><span style="color:#032F62;">you</span><span style="color:#24292E;"> </span><span style="color:#032F62;">expected,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">check</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">input</span><span style="color:#24292E;"> </span><span style="color:#032F62;">data</span><span style="color:#24292E;"> (as </span><span style="color:#032F62;">JSON</span><span style="color:#24292E;"> </span><span style="color:#032F62;">parsing</span><span style="color:#24292E;"> </span><span style="color:#032F62;">will</span><span style="color:#24292E;"> </span><span style="color:#032F62;">skip</span><span style="color:#24292E;"> </span><span style="color:#032F62;">unexpected</span><span style="color:#24292E;"> </span><span style="color:#032F62;">fields</span><span style="color:#24292E;">).</span></span></code></pre></div><p>应用VSchema就表示原keyspace已分片，如果此时出现查询有失败情况发生，则可以将VSchema还原，修复所有查询后再进行分片。</p><h3 id="创建新的分片" tabindex="-1">创建新的分片 <a class="header-anchor" href="#创建新的分片" aria-label="Permalink to &quot;创建新的分片&quot;">​</a></h3><p>执行如下指令，为customer的keyspace添加新的分片：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#kubectl apply -f 302_new_shards.yaml -nxzq</span></span>
<span class="line"><span style="color:#B392F0;">vitesscluster.planetscale.com/example</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">configured</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#kubectl apply -f 302_new_shards.yaml -nxzq</span></span>
<span class="line"><span style="color:#6F42C1;">vitesscluster.planetscale.com/example</span><span style="color:#24292E;"> </span><span style="color:#032F62;">configured</span></span></code></pre></div><p>302_new_shards.yaml文件和201_customer_tablets.yaml区别在于多出了如下内容：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">keyspaces:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">……</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">name:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">customer</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">……</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">partitionings:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">equal:</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">parts:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">shardTemplate:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">databaseInitScriptSecret:</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#B392F0;">name:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">example-cluster-config</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#B392F0;">key:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">init_db.sql</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">replication:</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#B392F0;">enforceSemiSync:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">tabletPools:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cell:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zone1</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">replica</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#B392F0;">replicas:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#B392F0;">vttablet:</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#B392F0;">extraFlags:</span></span>
<span class="line"><span style="color:#E1E4E8;">                  </span><span style="color:#B392F0;">db_charset:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">utf8mb4</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#B392F0;">resources:</span></span>
<span class="line"><span style="color:#E1E4E8;">                  </span><span style="color:#B392F0;">requests:</span></span>
<span class="line"><span style="color:#E1E4E8;">                    </span><span style="color:#B392F0;">cpu:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">m</span></span>
<span class="line"><span style="color:#E1E4E8;">                    </span><span style="color:#B392F0;">memory:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">256</span><span style="color:#9ECBFF;">Mi</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#B392F0;">mysqld:</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#B392F0;">resources:</span></span>
<span class="line"><span style="color:#E1E4E8;">                  </span><span style="color:#B392F0;">requests:</span></span>
<span class="line"><span style="color:#E1E4E8;">                    </span><span style="color:#B392F0;">cpu:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">m</span></span>
<span class="line"><span style="color:#E1E4E8;">                    </span><span style="color:#B392F0;">memory:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">256</span><span style="color:#9ECBFF;">Mi</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#B392F0;">dataVolumeClaimTemplate:</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#B392F0;">accessModes:</span><span style="color:#E1E4E8;"> [</span><span style="color:#9ECBFF;">&quot;ReadWriteOnce&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#B392F0;">resources:</span></span>
<span class="line"><span style="color:#E1E4E8;">                  </span><span style="color:#B392F0;">requests:</span></span>
<span class="line"><span style="color:#E1E4E8;">                    </span><span style="color:#B392F0;">storage:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">keyspaces:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">……</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">name:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">customer</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">……</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">partitionings:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">equal:</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">parts:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">shardTemplate:</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">databaseInitScriptSecret:</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#6F42C1;">name:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">example-cluster-config</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#6F42C1;">key:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">init_db.sql</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">replication:</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#6F42C1;">enforceSemiSync:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">false</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">tabletPools:</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cell:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zone1</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#005CC5;">type</span><span style="color:#24292E;">: </span><span style="color:#032F62;">replica</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#6F42C1;">replicas:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#6F42C1;">vttablet:</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6F42C1;">extraFlags:</span></span>
<span class="line"><span style="color:#24292E;">                  </span><span style="color:#6F42C1;">db_charset:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">utf8mb4</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6F42C1;">resources:</span></span>
<span class="line"><span style="color:#24292E;">                  </span><span style="color:#6F42C1;">requests:</span></span>
<span class="line"><span style="color:#24292E;">                    </span><span style="color:#6F42C1;">cpu:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">100</span><span style="color:#032F62;">m</span></span>
<span class="line"><span style="color:#24292E;">                    </span><span style="color:#6F42C1;">memory:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">256</span><span style="color:#032F62;">Mi</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#6F42C1;">mysqld:</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6F42C1;">resources:</span></span>
<span class="line"><span style="color:#24292E;">                  </span><span style="color:#6F42C1;">requests:</span></span>
<span class="line"><span style="color:#24292E;">                    </span><span style="color:#6F42C1;">cpu:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">100</span><span style="color:#032F62;">m</span></span>
<span class="line"><span style="color:#24292E;">                    </span><span style="color:#6F42C1;">memory:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">256</span><span style="color:#032F62;">Mi</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#6F42C1;">dataVolumeClaimTemplate:</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6F42C1;">accessModes:</span><span style="color:#24292E;"> [</span><span style="color:#032F62;">&quot;ReadWriteOnce&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6F42C1;">resources:</span></span>
<span class="line"><span style="color:#24292E;">                  </span><span style="color:#6F42C1;">requests:</span></span>
<span class="line"><span style="color:#24292E;">                    </span><span style="color:#6F42C1;">storage:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span></span></code></pre></div><p>更新完成后，资源如下：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#sh get_resoure.sh</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                                                 </span><span style="color:#9ECBFF;">READY</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">RESTARTS</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">AGE</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">IP</span><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">NODE</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">NOMINATED</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">NODE</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">READINESS</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">GATES</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-etcd-faf13de3-1</span><span style="color:#E1E4E8;">                          </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">17</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.179</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-etcd-faf13de3-2</span><span style="color:#E1E4E8;">                          </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">17</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.135</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-etcd-faf13de3-3</span><span style="color:#E1E4E8;">                          </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">17</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.176</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-vttablet-zone1-0118374573-10d08e80</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">/3</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">8</span><span style="color:#9ECBFF;">m46s</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.218.29</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-vttablet-zone1-0120139806-fed29577</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">/3</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">8</span><span style="color:#9ECBFF;">m46s</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.218.25</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-vttablet-zone1-1250593518-17c58396</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">/3</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">16</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.239</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-vttablet-zone1-2289928654-7de47379</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">/3</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">8</span><span style="color:#9ECBFF;">m46s</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.218.26</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-vttablet-zone1-2469782763-bfadd780</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">/3</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">17</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.149</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-vttablet-zone1-2548885007-46a852d0</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">/3</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">17</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.182</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-vttablet-zone1-3778123133-6f4ed5fc</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">/3</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">16</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.241</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-vttablet-zone1-4277914223-0f04a9a6</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">/3</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">8</span><span style="color:#9ECBFF;">m46s</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.218.35</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-zone1-vtctld-1d4dcad0-cf87d58cb-r2cvg</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">17</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.185</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-zone1-vtgate-bc6cde92-685d69cc5c-4w54k</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">17</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.140</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/vitess-operator-6b495ddbb-cq988</span><span style="color:#E1E4E8;">                  </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">d15h</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.248</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                                    </span><span style="color:#9ECBFF;">TYPE</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">CLUSTER-IP</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">EXTERNAL-IP</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">PORT</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">S</span><span style="color:#E1E4E8;">)                        </span><span style="color:#9ECBFF;">AGE</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">SELECTOR</span></span>
<span class="line"><span style="color:#B392F0;">service/example-etcd-faf13de3-client</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.97</span><span style="color:#9ECBFF;">.55.121</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">2379</span><span style="color:#9ECBFF;">/TCP</span><span style="color:#E1E4E8;">                       </span><span style="color:#79B8FF;">17</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">etcd.planetscale.com/lockserver=example-etcd-faf13de3</span></span>
<span class="line"><span style="color:#B392F0;">service/example-etcd-faf13de3-peer</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">None</span><span style="color:#E1E4E8;">              </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">2380</span><span style="color:#9ECBFF;">/TCP</span><span style="color:#E1E4E8;">                       </span><span style="color:#79B8FF;">17</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">etcd.planetscale.com/lockserver=example-etcd-faf13de3</span></span>
<span class="line"><span style="color:#B392F0;">service/example-vtctld-625ee430</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.99</span><span style="color:#9ECBFF;">.245.244</span><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">15000</span><span style="color:#9ECBFF;">/TCP,15999/TCP</span><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">17</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">planetscale.com/cluster=example,planetscale.com/component=vtctld</span></span>
<span class="line"><span style="color:#B392F0;">service/example-vtgate-ae7df4b6</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.102</span><span style="color:#9ECBFF;">.28.49</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">15000</span><span style="color:#9ECBFF;">/TCP,15999/TCP,3306/TCP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">17</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">planetscale.com/cluster=example,planetscale.com/component=vtgate</span></span>
<span class="line"><span style="color:#B392F0;">service/example-vttablet-08646a59</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">None</span><span style="color:#E1E4E8;">              </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">15000</span><span style="color:#9ECBFF;">/TCP,15999/TCP,9104/TCP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">17</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">planetscale.com/cluster=example,planetscale.com/component=vttablet</span></span>
<span class="line"><span style="color:#B392F0;">service/example-zone1-vtgate-bc6cde92</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.106</span><span style="color:#9ECBFF;">.170.227</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">15000</span><span style="color:#9ECBFF;">/TCP,15999/TCP,3306/TCP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">17</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">planetscale.com/cell=zone1,planetscale.com/cluster=example,planetscale.com/component=vtgate</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                                                               </span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">VOLUME</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">CAPACITY</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">ACCESS</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MODES</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">STORAGECLASS</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">AGE</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">VOLUMEMODE</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-etcd-faf13de3-1</span><span style="color:#E1E4E8;">                      </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-12</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">17</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-etcd-faf13de3-2</span><span style="color:#E1E4E8;">                      </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-11</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">17</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-etcd-faf13de3-3</span><span style="color:#E1E4E8;">                      </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-13</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">17</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-vttablet-zone1-0118374573-10d08e80</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-1</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">8</span><span style="color:#9ECBFF;">m46s</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-vttablet-zone1-0120139806-fed29577</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-4</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">8</span><span style="color:#9ECBFF;">m46s</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-vttablet-zone1-1250593518-17c58396</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-7</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">16</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-vttablet-zone1-2289928654-7de47379</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-3</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">8</span><span style="color:#9ECBFF;">m46s</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-vttablet-zone1-2469782763-bfadd780</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-2</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">17</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-vttablet-zone1-2548885007-46a852d0</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-9</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">17</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-vttablet-zone1-3778123133-6f4ed5fc</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-10</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">16</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-vttablet-zone1-4277914223-0f04a9a6</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-6</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">8</span><span style="color:#9ECBFF;">m46s</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Filesystem</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#sh get_resoure.sh</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                                                 </span><span style="color:#032F62;">READY</span><span style="color:#24292E;">   </span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">    </span><span style="color:#032F62;">RESTARTS</span><span style="color:#24292E;">   </span><span style="color:#032F62;">AGE</span><span style="color:#24292E;">     </span><span style="color:#032F62;">IP</span><span style="color:#24292E;">                </span><span style="color:#032F62;">NODE</span><span style="color:#24292E;">      </span><span style="color:#032F62;">NOMINATED</span><span style="color:#24292E;"> </span><span style="color:#032F62;">NODE</span><span style="color:#24292E;">   </span><span style="color:#032F62;">READINESS</span><span style="color:#24292E;"> </span><span style="color:#032F62;">GATES</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-etcd-faf13de3-1</span><span style="color:#24292E;">                          </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">17</span><span style="color:#032F62;">h</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.179</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-etcd-faf13de3-2</span><span style="color:#24292E;">                          </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">17</span><span style="color:#032F62;">h</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.135</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-etcd-faf13de3-3</span><span style="color:#24292E;">                          </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">17</span><span style="color:#032F62;">h</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.176</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-vttablet-zone1-0118374573-10d08e80</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">/3</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">8</span><span style="color:#032F62;">m46s</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.218.29</span><span style="color:#24292E;">    </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-vttablet-zone1-0120139806-fed29577</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">/3</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">8</span><span style="color:#032F62;">m46s</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.218.25</span><span style="color:#24292E;">    </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-vttablet-zone1-1250593518-17c58396</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">/3</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">16</span><span style="color:#032F62;">h</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.239</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-vttablet-zone1-2289928654-7de47379</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">/3</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">8</span><span style="color:#032F62;">m46s</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.218.26</span><span style="color:#24292E;">    </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-vttablet-zone1-2469782763-bfadd780</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">/3</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">17</span><span style="color:#032F62;">h</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.149</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-vttablet-zone1-2548885007-46a852d0</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">/3</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">17</span><span style="color:#032F62;">h</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.182</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-vttablet-zone1-3778123133-6f4ed5fc</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">/3</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">16</span><span style="color:#032F62;">h</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.241</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-vttablet-zone1-4277914223-0f04a9a6</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">/3</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">8</span><span style="color:#032F62;">m46s</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.218.35</span><span style="color:#24292E;">    </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-zone1-vtctld-1d4dcad0-cf87d58cb-r2cvg</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">17</span><span style="color:#032F62;">h</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.185</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-zone1-vtgate-bc6cde92-685d69cc5c-4w54k</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">17</span><span style="color:#032F62;">h</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.140</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/vitess-operator-6b495ddbb-cq988</span><span style="color:#24292E;">                  </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">d15h</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.248</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                                    </span><span style="color:#032F62;">TYPE</span><span style="color:#24292E;">        </span><span style="color:#032F62;">CLUSTER-IP</span><span style="color:#24292E;">        </span><span style="color:#032F62;">EXTERNAL-IP</span><span style="color:#24292E;">   </span><span style="color:#032F62;">PORT</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">S</span><span style="color:#24292E;">)                        </span><span style="color:#032F62;">AGE</span><span style="color:#24292E;">   </span><span style="color:#032F62;">SELECTOR</span></span>
<span class="line"><span style="color:#6F42C1;">service/example-etcd-faf13de3-client</span><span style="color:#24292E;">    </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.97</span><span style="color:#032F62;">.55.121</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">2379</span><span style="color:#032F62;">/TCP</span><span style="color:#24292E;">                       </span><span style="color:#005CC5;">17</span><span style="color:#032F62;">h</span><span style="color:#24292E;">   </span><span style="color:#032F62;">etcd.planetscale.com/lockserver=example-etcd-faf13de3</span></span>
<span class="line"><span style="color:#6F42C1;">service/example-etcd-faf13de3-peer</span><span style="color:#24292E;">      </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#032F62;">None</span><span style="color:#24292E;">              </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">2380</span><span style="color:#032F62;">/TCP</span><span style="color:#24292E;">                       </span><span style="color:#005CC5;">17</span><span style="color:#032F62;">h</span><span style="color:#24292E;">   </span><span style="color:#032F62;">etcd.planetscale.com/lockserver=example-etcd-faf13de3</span></span>
<span class="line"><span style="color:#6F42C1;">service/example-vtctld-625ee430</span><span style="color:#24292E;">         </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.99</span><span style="color:#032F62;">.245.244</span><span style="color:#24292E;">    </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">15000</span><span style="color:#032F62;">/TCP,15999/TCP</span><span style="color:#24292E;">            </span><span style="color:#005CC5;">17</span><span style="color:#032F62;">h</span><span style="color:#24292E;">   </span><span style="color:#032F62;">planetscale.com/cluster=example,planetscale.com/component=vtctld</span></span>
<span class="line"><span style="color:#6F42C1;">service/example-vtgate-ae7df4b6</span><span style="color:#24292E;">         </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.102</span><span style="color:#032F62;">.28.49</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">15000</span><span style="color:#032F62;">/TCP,15999/TCP,3306/TCP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">17</span><span style="color:#032F62;">h</span><span style="color:#24292E;">   </span><span style="color:#032F62;">planetscale.com/cluster=example,planetscale.com/component=vtgate</span></span>
<span class="line"><span style="color:#6F42C1;">service/example-vttablet-08646a59</span><span style="color:#24292E;">       </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#032F62;">None</span><span style="color:#24292E;">              </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">15000</span><span style="color:#032F62;">/TCP,15999/TCP,9104/TCP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">17</span><span style="color:#032F62;">h</span><span style="color:#24292E;">   </span><span style="color:#032F62;">planetscale.com/cluster=example,planetscale.com/component=vttablet</span></span>
<span class="line"><span style="color:#6F42C1;">service/example-zone1-vtgate-bc6cde92</span><span style="color:#24292E;">   </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.106</span><span style="color:#032F62;">.170.227</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">15000</span><span style="color:#032F62;">/TCP,15999/TCP,3306/TCP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">17</span><span style="color:#032F62;">h</span><span style="color:#24292E;">   </span><span style="color:#032F62;">planetscale.com/cell=zone1,planetscale.com/cluster=example,planetscale.com/component=vtgate</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                                                               </span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">   </span><span style="color:#032F62;">VOLUME</span><span style="color:#24292E;">           </span><span style="color:#032F62;">CAPACITY</span><span style="color:#24292E;">   </span><span style="color:#032F62;">ACCESS</span><span style="color:#24292E;"> </span><span style="color:#032F62;">MODES</span><span style="color:#24292E;">   </span><span style="color:#032F62;">STORAGECLASS</span><span style="color:#24292E;">   </span><span style="color:#032F62;">AGE</span><span style="color:#24292E;">     </span><span style="color:#032F62;">VOLUMEMODE</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-etcd-faf13de3-1</span><span style="color:#24292E;">                      </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-12</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">17</span><span style="color:#032F62;">h</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-etcd-faf13de3-2</span><span style="color:#24292E;">                      </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-11</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">17</span><span style="color:#032F62;">h</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-etcd-faf13de3-3</span><span style="color:#24292E;">                      </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-13</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">17</span><span style="color:#032F62;">h</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-vttablet-zone1-0118374573-10d08e80</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-1</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">8</span><span style="color:#032F62;">m46s</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-vttablet-zone1-0120139806-fed29577</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-4</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">8</span><span style="color:#032F62;">m46s</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-vttablet-zone1-1250593518-17c58396</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-7</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">16</span><span style="color:#032F62;">h</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-vttablet-zone1-2289928654-7de47379</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-3</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">8</span><span style="color:#032F62;">m46s</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-vttablet-zone1-2469782763-bfadd780</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-2</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">17</span><span style="color:#032F62;">h</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-vttablet-zone1-2548885007-46a852d0</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-9</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">17</span><span style="color:#032F62;">h</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-vttablet-zone1-3778123133-6f4ed5fc</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-10</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">16</span><span style="color:#032F62;">h</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-vttablet-zone1-4277914223-0f04a9a6</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-6</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">8</span><span style="color:#032F62;">m46s</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Filesystem</span></span></code></pre></div><p>可见比起拆分键空间(垂直分库)时多出了4个vttablet的pod,查看此刻的vttablets如下：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># echo &quot;show vitess_tablets;&quot; | mysql --table</span></span>
<span class="line"><span style="color:#B392F0;">+-------+----------+-------+------------+---------+------------------+-----------------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Cell</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Keyspace</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Shard</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">TabletType</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">State</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Alias</span><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Hostname</span><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+-------+----------+-------+------------+---------+------------------+-----------------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">commerce</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">MASTER</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SERVING</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1-2548885007</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">101.244.217.182</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">commerce</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">REPLICA</span><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SERVING</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1-2469782763</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">101.244.217.149</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">customer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">MASTER</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SERVING</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1-1250593518</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">101.244.217.239</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">customer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">REPLICA</span><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SERVING</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1-3778123133</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">101.244.217.241</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">customer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">-80</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">MASTER</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SERVING</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1-0120139806</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">101.244.218.25</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">customer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">-80</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">REPLICA</span><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SERVING</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1-2289928654</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">101.244.218.26</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">customer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">80-</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">MASTER</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SERVING</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1-0118374573</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">101.244.218.29</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">customer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">80-</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">REPLICA</span><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SERVING</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1-4277914223</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">101.244.218.35</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+-------+----------+-------+------------+---------+------------------+-----------------+</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># echo &quot;show vitess_tablets;&quot; | mysql --table</span></span>
<span class="line"><span style="color:#6F42C1;">+-------+----------+-------+------------+---------+------------------+-----------------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Cell</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Keyspace</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Shard</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TabletType</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">State</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Alias</span><span style="color:#24292E;">            </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Hostname</span><span style="color:#24292E;">        </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+-------+----------+-------+------------+---------+------------------+-----------------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">commerce</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MASTER</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SERVING</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1-2548885007</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">101.244.217.182</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">commerce</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">REPLICA</span><span style="color:#24292E;">    </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SERVING</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1-2469782763</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">101.244.217.149</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">customer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MASTER</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SERVING</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1-1250593518</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">101.244.217.239</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">customer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">REPLICA</span><span style="color:#24292E;">    </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SERVING</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1-3778123133</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">101.244.217.241</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">customer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">-80</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MASTER</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SERVING</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1-0120139806</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">101.244.218.25</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">customer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">-80</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">REPLICA</span><span style="color:#24292E;">    </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SERVING</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1-2289928654</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">101.244.218.26</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">customer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">80-</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MASTER</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SERVING</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1-0118374573</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">101.244.218.29</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">customer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">80-</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">REPLICA</span><span style="color:#24292E;">    </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SERVING</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1-4277914223</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">101.244.218.35</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+-------+----------+-------+------------+---------+------------------+-----------------+</span></span></code></pre></div><p>可见customer的keyspace多出了-80和80-两个片分区，各自分别有一个主备。</p><h3 id="启动分片" tabindex="-1">启动分片 <a class="header-anchor" href="#启动分片" aria-label="Permalink to &quot;启动分片&quot;">​</a></h3><p>执行如下语句，启动分片，即可将原分片内容分到两个新的分片中，并验证其正确性，此过程不会影响数据库的读写操作：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#vtctlclient Reshard customer.cust2cust &#39;-&#39; &#39;-80,80-&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#vtctlclient VDiff customer.cust2cust</span></span>
<span class="line"><span style="color:#B392F0;">Summary</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">for</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">corder:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{ProcessedRows:5</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MatchingRows:5</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MismatchedRows:0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ExtraRowsSource:0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ExtraRowsTarget:0}</span></span>
<span class="line"><span style="color:#B392F0;">Summary</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">for</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">customer:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{ProcessedRows:5</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MatchingRows:5</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MismatchedRows:0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ExtraRowsSource:0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ExtraRowsTarget:0}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#vtctlclient Reshard customer.cust2cust &#39;-&#39; &#39;-80,80-&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#vtctlclient VDiff customer.cust2cust</span></span>
<span class="line"><span style="color:#6F42C1;">Summary</span><span style="color:#24292E;"> </span><span style="color:#032F62;">for</span><span style="color:#24292E;"> </span><span style="color:#032F62;">corder:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{ProcessedRows:5</span><span style="color:#24292E;"> </span><span style="color:#032F62;">MatchingRows:5</span><span style="color:#24292E;"> </span><span style="color:#032F62;">MismatchedRows:0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ExtraRowsSource:0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ExtraRowsTarget:0}</span></span>
<span class="line"><span style="color:#6F42C1;">Summary</span><span style="color:#24292E;"> </span><span style="color:#032F62;">for</span><span style="color:#24292E;"> </span><span style="color:#032F62;">customer:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{ProcessedRows:5</span><span style="color:#24292E;"> </span><span style="color:#032F62;">MatchingRows:5</span><span style="color:#24292E;"> </span><span style="color:#032F62;">MismatchedRows:0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ExtraRowsSource:0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ExtraRowsTarget:0}</span></span></code></pre></div><p>至此，可查询-分片、-80分片和80-分片中的内容,此处需要修改&quot;../common/select_customer0_data.sql&quot;文件，将其中的&quot;customer/0&quot;改为&quot;customer/-&quot;：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#mysql --table &lt; ../common/select_customer0_data.sql</span></span>
<span class="line"><span style="color:#B392F0;">Using</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">customer/-</span></span>
<span class="line"><span style="color:#B392F0;">Customer</span></span>
<span class="line"><span style="color:#B392F0;">+-------------+--------------------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">customer_id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">email</span><span style="color:#E1E4E8;">              </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+-------------+--------------------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">alice@domain.com</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">bob@domain.com</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">charlie@domain.com</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">4</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">dan@domain.com</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">5</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">eve@domain.com</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+-------------+--------------------+</span></span>
<span class="line"><span style="color:#B392F0;">COrder</span></span>
<span class="line"><span style="color:#B392F0;">+----------+-------------+----------+-------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">order_id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">customer_id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">sku</span><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">price</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+----------+-------------+----------+-------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SKU-1001</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">100</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SKU-1002</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">30</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SKU-1002</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">30</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">4</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">4</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SKU-1002</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">30</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">5</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">5</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SKU-1002</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">30</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+----------+-------------+----------+-------+</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#mysql --table &lt; ../common/select_customer-80_data.sql</span></span>
<span class="line"><span style="color:#B392F0;">Using</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">customer/-80</span></span>
<span class="line"><span style="color:#B392F0;">Customer</span></span>
<span class="line"><span style="color:#B392F0;">+-------------+--------------------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">customer_id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">email</span><span style="color:#E1E4E8;">              </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+-------------+--------------------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">alice@domain.com</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">bob@domain.com</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">charlie@domain.com</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">5</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">eve@domain.com</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+-------------+--------------------+</span></span>
<span class="line"><span style="color:#B392F0;">COrder</span></span>
<span class="line"><span style="color:#B392F0;">+----------+-------------+----------+-------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">order_id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">customer_id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">sku</span><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">price</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+----------+-------------+----------+-------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SKU-1001</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">100</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SKU-1002</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">30</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SKU-1002</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">30</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">5</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">5</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SKU-1002</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">30</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+----------+-------------+----------+-------+</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#mysql --table &lt; ../common/select_customer80-_data.sql</span></span>
<span class="line"><span style="color:#B392F0;">Using</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">customer/80-</span></span>
<span class="line"><span style="color:#B392F0;">Customer</span></span>
<span class="line"><span style="color:#B392F0;">+-------------+----------------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">customer_id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">email</span><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+-------------+----------------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">4</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">dan@domain.com</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+-------------+----------------+</span></span>
<span class="line"><span style="color:#B392F0;">COrder</span></span>
<span class="line"><span style="color:#B392F0;">+----------+-------------+----------+-------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">order_id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">customer_id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">sku</span><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">price</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+----------+-------------+----------+-------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">4</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">4</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SKU-1002</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">30</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+----------+-------------+----------+-------+</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#mysql --table &lt; ../common/select_customer0_data.sql</span></span>
<span class="line"><span style="color:#6F42C1;">Using</span><span style="color:#24292E;"> </span><span style="color:#032F62;">customer/-</span></span>
<span class="line"><span style="color:#6F42C1;">Customer</span></span>
<span class="line"><span style="color:#6F42C1;">+-------------+--------------------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">customer_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">email</span><span style="color:#24292E;">              </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+-------------+--------------------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">alice@domain.com</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">bob@domain.com</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">3</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">charlie@domain.com</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">4</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">dan@domain.com</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">5</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">eve@domain.com</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+-------------+--------------------+</span></span>
<span class="line"><span style="color:#6F42C1;">COrder</span></span>
<span class="line"><span style="color:#6F42C1;">+----------+-------------+----------+-------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">order_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">customer_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">sku</span><span style="color:#24292E;">      </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">price</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+----------+-------------+----------+-------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">        </span><span style="color:#6F42C1;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SKU-1001</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">   </span><span style="color:#6F42C1;">100</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">        </span><span style="color:#6F42C1;">2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SKU-1002</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">    </span><span style="color:#6F42C1;">30</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">        </span><span style="color:#6F42C1;">3</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">3</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SKU-1002</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">    </span><span style="color:#6F42C1;">30</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">        </span><span style="color:#6F42C1;">4</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">4</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SKU-1002</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">    </span><span style="color:#6F42C1;">30</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">        </span><span style="color:#6F42C1;">5</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">5</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SKU-1002</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">    </span><span style="color:#6F42C1;">30</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+----------+-------------+----------+-------+</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#mysql --table &lt; ../common/select_customer-80_data.sql</span></span>
<span class="line"><span style="color:#6F42C1;">Using</span><span style="color:#24292E;"> </span><span style="color:#032F62;">customer/-80</span></span>
<span class="line"><span style="color:#6F42C1;">Customer</span></span>
<span class="line"><span style="color:#6F42C1;">+-------------+--------------------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">customer_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">email</span><span style="color:#24292E;">              </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+-------------+--------------------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">alice@domain.com</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">bob@domain.com</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">3</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">charlie@domain.com</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">5</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">eve@domain.com</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+-------------+--------------------+</span></span>
<span class="line"><span style="color:#6F42C1;">COrder</span></span>
<span class="line"><span style="color:#6F42C1;">+----------+-------------+----------+-------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">order_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">customer_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">sku</span><span style="color:#24292E;">      </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">price</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+----------+-------------+----------+-------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">        </span><span style="color:#6F42C1;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SKU-1001</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">   </span><span style="color:#6F42C1;">100</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">        </span><span style="color:#6F42C1;">2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SKU-1002</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">    </span><span style="color:#6F42C1;">30</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">        </span><span style="color:#6F42C1;">3</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">3</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SKU-1002</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">    </span><span style="color:#6F42C1;">30</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">        </span><span style="color:#6F42C1;">5</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">5</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SKU-1002</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">    </span><span style="color:#6F42C1;">30</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+----------+-------------+----------+-------+</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#mysql --table &lt; ../common/select_customer80-_data.sql</span></span>
<span class="line"><span style="color:#6F42C1;">Using</span><span style="color:#24292E;"> </span><span style="color:#032F62;">customer/80-</span></span>
<span class="line"><span style="color:#6F42C1;">Customer</span></span>
<span class="line"><span style="color:#6F42C1;">+-------------+----------------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">customer_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">email</span><span style="color:#24292E;">          </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+-------------+----------------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">4</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">dan@domain.com</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+-------------+----------------+</span></span>
<span class="line"><span style="color:#6F42C1;">COrder</span></span>
<span class="line"><span style="color:#6F42C1;">+----------+-------------+----------+-------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">order_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">customer_id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">sku</span><span style="color:#24292E;">      </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">price</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+----------+-------------+----------+-------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">        </span><span style="color:#6F42C1;">4</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">           </span><span style="color:#6F42C1;">4</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SKU-1002</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">    </span><span style="color:#6F42C1;">30</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+----------+-------------+----------+-------+</span></span></code></pre></div><p>可见，customer/-分片中的数据已经被拆分到了customer/80-和customer/-80中。</p><h3 id="切换读取" tabindex="-1">切换读取 <a class="header-anchor" href="#切换读取" aria-label="Permalink to &quot;切换读取&quot;">​</a></h3><p>在完成分片之后需要将读取操作切换到新的切片中，指令如下：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">vtctlclient</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">SwitchReads</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-tablet_type=rdonly</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">customer.cust2cust</span></span>
<span class="line"><span style="color:#B392F0;">vtctlclient</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">SwitchReads</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-tablet_type=replica</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">customer.cust2cust</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">vtctlclient</span><span style="color:#24292E;"> </span><span style="color:#032F62;">SwitchReads</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-tablet_type=rdonly</span><span style="color:#24292E;"> </span><span style="color:#032F62;">customer.cust2cust</span></span>
<span class="line"><span style="color:#6F42C1;">vtctlclient</span><span style="color:#24292E;"> </span><span style="color:#032F62;">SwitchReads</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-tablet_type=replica</span><span style="color:#24292E;"> </span><span style="color:#032F62;">customer.cust2cust</span></span></code></pre></div><h3 id="切换写入" tabindex="-1">切换写入 <a class="header-anchor" href="#切换写入" aria-label="Permalink to &quot;切换写入&quot;">​</a></h3><p>切换好读取权限之后将写操作也切换到新的切片中，指令如下：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">vtctlclient</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">SwitchWrites</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">customer.cust2cust</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">vtctlclient</span><span style="color:#24292E;"> </span><span style="color:#032F62;">SwitchWrites</span><span style="color:#24292E;"> </span><span style="color:#032F62;">customer.cust2cust</span></span></code></pre></div><h3 id="清理原分片" tabindex="-1">清理原分片 <a class="header-anchor" href="#清理原分片" aria-label="Permalink to &quot;清理原分片&quot;">​</a></h3><p>在权限切换完成之后即可清理原分片数据</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apply</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">306</span><span style="color:#9ECBFF;">_down_shard_0.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-nxzq</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">apply</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">306</span><span style="color:#032F62;">_down_shard_0.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-nxzq</span></span></code></pre></div><pre><code>306_down_shard_0.yaml和302_new_shards.yaml相比，删除了如下部分：
</code></pre><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">keyspaces:</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#B392F0;">……</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">name:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">customer</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#B392F0;">……</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">partitionings:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">equal:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">parts:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">shardTemplate:</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">databaseInitScriptSecret:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">name:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">example-cluster-config</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">key:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">init_db.sql</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">replication:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">enforceSemiSync:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">tabletPools:</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cell:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zone1</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">replica</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">replicas:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">vttablet:</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#B392F0;">extraFlags:</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#B392F0;">db_charset:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">utf8mb4</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#B392F0;">resources:</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#B392F0;">requests:</span></span>
<span class="line"><span style="color:#E1E4E8;">                  </span><span style="color:#B392F0;">cpu:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">m</span></span>
<span class="line"><span style="color:#E1E4E8;">                  </span><span style="color:#B392F0;">memory:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">256</span><span style="color:#9ECBFF;">Mi</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">mysqld:</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#B392F0;">resources:</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#B392F0;">requests:</span></span>
<span class="line"><span style="color:#E1E4E8;">                  </span><span style="color:#B392F0;">cpu:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;">m</span></span>
<span class="line"><span style="color:#E1E4E8;">                  </span><span style="color:#B392F0;">memory:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">256</span><span style="color:#9ECBFF;">Mi</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">dataVolumeClaimTemplate:</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#B392F0;">accessModes:</span><span style="color:#E1E4E8;"> [</span><span style="color:#9ECBFF;">&quot;ReadWriteOnce&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#B392F0;">resources:</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#B392F0;">requests:</span></span>
<span class="line"><span style="color:#E1E4E8;">                  </span><span style="color:#B392F0;">storage:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">keyspaces:</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6F42C1;">……</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">name:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">customer</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6F42C1;">……</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">partitionings:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">equal:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">parts:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">shardTemplate:</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">databaseInitScriptSecret:</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">name:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">example-cluster-config</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">key:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">init_db.sql</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">replication:</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">enforceSemiSync:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">false</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">tabletPools:</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cell:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zone1</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">type</span><span style="color:#24292E;">: </span><span style="color:#032F62;">replica</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">replicas:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">vttablet:</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#6F42C1;">extraFlags:</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6F42C1;">db_charset:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">utf8mb4</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#6F42C1;">resources:</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6F42C1;">requests:</span></span>
<span class="line"><span style="color:#24292E;">                  </span><span style="color:#6F42C1;">cpu:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">100</span><span style="color:#032F62;">m</span></span>
<span class="line"><span style="color:#24292E;">                  </span><span style="color:#6F42C1;">memory:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">256</span><span style="color:#032F62;">Mi</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">mysqld:</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#6F42C1;">resources:</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6F42C1;">requests:</span></span>
<span class="line"><span style="color:#24292E;">                  </span><span style="color:#6F42C1;">cpu:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">100</span><span style="color:#032F62;">m</span></span>
<span class="line"><span style="color:#24292E;">                  </span><span style="color:#6F42C1;">memory:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">256</span><span style="color:#032F62;">Mi</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">dataVolumeClaimTemplate:</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#6F42C1;">accessModes:</span><span style="color:#24292E;"> [</span><span style="color:#032F62;">&quot;ReadWriteOnce&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#6F42C1;">resources:</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#6F42C1;">requests:</span></span>
<span class="line"><span style="color:#24292E;">                  </span><span style="color:#6F42C1;">storage:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span></span></code></pre></div><p>从yaml中少去的部分可知，清理操作是将customer原有的分片移除了，查看此时的资源如下：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#sh get_resoure.sh</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                                                 </span><span style="color:#9ECBFF;">READY</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">RESTARTS</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">AGE</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">IP</span><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">NODE</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">NOMINATED</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">NODE</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">READINESS</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">GATES</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-etcd-faf13de3-1</span><span style="color:#E1E4E8;">                          </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">18</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.179</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-etcd-faf13de3-2</span><span style="color:#E1E4E8;">                          </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">18</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.135</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-etcd-faf13de3-3</span><span style="color:#E1E4E8;">                          </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">18</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.176</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-vttablet-zone1-0118374573-10d08e80</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">/3</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">32</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.149</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-vttablet-zone1-0120139806-fed29577</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">/3</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">32</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.241</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-vttablet-zone1-2289928654-7de47379</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">/3</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">56</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.218.26</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-vttablet-zone1-2469782763-bfadd780</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">/3</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">32</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.239</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-vttablet-zone1-2548885007-46a852d0</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">/3</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">18</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.182</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-vttablet-zone1-4277914223-0f04a9a6</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">/3</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">56</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.218.35</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-zone1-vtctld-1d4dcad0-cf87d58cb-r2cvg</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">18</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.185</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/example-zone1-vtgate-bc6cde92-685d69cc5c-4w54k</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">18</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.140</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">pod/vitess-operator-6b495ddbb-cq988</span><span style="color:#E1E4E8;">                  </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">d16h</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.244</span><span style="color:#9ECBFF;">.217.248</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">qfusion</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                                    </span><span style="color:#9ECBFF;">TYPE</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">CLUSTER-IP</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">EXTERNAL-IP</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">PORT</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">S</span><span style="color:#E1E4E8;">)                        </span><span style="color:#9ECBFF;">AGE</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">SELECTOR</span></span>
<span class="line"><span style="color:#B392F0;">service/example-etcd-faf13de3-client</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.97</span><span style="color:#9ECBFF;">.55.121</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">2379</span><span style="color:#9ECBFF;">/TCP</span><span style="color:#E1E4E8;">                       </span><span style="color:#79B8FF;">18</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">etcd.planetscale.com/lockserver=example-etcd-faf13de3</span></span>
<span class="line"><span style="color:#B392F0;">service/example-etcd-faf13de3-peer</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">None</span><span style="color:#E1E4E8;">              </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">2380</span><span style="color:#9ECBFF;">/TCP</span><span style="color:#E1E4E8;">                       </span><span style="color:#79B8FF;">18</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">etcd.planetscale.com/lockserver=example-etcd-faf13de3</span></span>
<span class="line"><span style="color:#B392F0;">service/example-vtctld-625ee430</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.99</span><span style="color:#9ECBFF;">.245.244</span><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">15000</span><span style="color:#9ECBFF;">/TCP,15999/TCP</span><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">18</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">planetscale.com/cluster=example,planetscale.com/component=vtctld</span></span>
<span class="line"><span style="color:#B392F0;">service/example-vtgate-ae7df4b6</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.102</span><span style="color:#9ECBFF;">.28.49</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">15000</span><span style="color:#9ECBFF;">/TCP,15999/TCP,3306/TCP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">18</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">planetscale.com/cluster=example,planetscale.com/component=vtgate</span></span>
<span class="line"><span style="color:#B392F0;">service/example-vttablet-08646a59</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">None</span><span style="color:#E1E4E8;">              </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">15000</span><span style="color:#9ECBFF;">/TCP,15999/TCP,9104/TCP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">18</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">planetscale.com/cluster=example,planetscale.com/component=vttablet</span></span>
<span class="line"><span style="color:#B392F0;">service/example-zone1-vtgate-bc6cde92</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">101.106</span><span style="color:#9ECBFF;">.170.227</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">15000</span><span style="color:#9ECBFF;">/TCP,15999/TCP,3306/TCP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">18</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">planetscale.com/cell=zone1,planetscale.com/cluster=example,planetscale.com/component=vtgate</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                                                               </span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">VOLUME</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">CAPACITY</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">ACCESS</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MODES</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">STORAGECLASS</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">AGE</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">VOLUMEMODE</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-etcd-faf13de3-1</span><span style="color:#E1E4E8;">                      </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-12</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">18</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-etcd-faf13de3-2</span><span style="color:#E1E4E8;">                      </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-11</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">18</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-etcd-faf13de3-3</span><span style="color:#E1E4E8;">                      </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-13</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">18</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-vttablet-zone1-0118374573-10d08e80</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-1</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">56</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-vttablet-zone1-0120139806-fed29577</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-4</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">56</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-vttablet-zone1-2289928654-7de47379</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-3</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">56</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-vttablet-zone1-2469782763-bfadd780</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-2</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">18</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-vttablet-zone1-2548885007-46a852d0</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-9</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">18</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Filesystem</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaim/example-vttablet-zone1-4277914223-0f04a9a6</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Bound</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">pv-hostpath-6</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">RWO</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">56</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Filesystem</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#sh get_resoure.sh</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                                                 </span><span style="color:#032F62;">READY</span><span style="color:#24292E;">   </span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">    </span><span style="color:#032F62;">RESTARTS</span><span style="color:#24292E;">   </span><span style="color:#032F62;">AGE</span><span style="color:#24292E;">     </span><span style="color:#032F62;">IP</span><span style="color:#24292E;">                </span><span style="color:#032F62;">NODE</span><span style="color:#24292E;">      </span><span style="color:#032F62;">NOMINATED</span><span style="color:#24292E;"> </span><span style="color:#032F62;">NODE</span><span style="color:#24292E;">   </span><span style="color:#032F62;">READINESS</span><span style="color:#24292E;"> </span><span style="color:#032F62;">GATES</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-etcd-faf13de3-1</span><span style="color:#24292E;">                          </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">18</span><span style="color:#032F62;">h</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.179</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-etcd-faf13de3-2</span><span style="color:#24292E;">                          </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">18</span><span style="color:#032F62;">h</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.135</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-etcd-faf13de3-3</span><span style="color:#24292E;">                          </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">18</span><span style="color:#032F62;">h</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.176</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-vttablet-zone1-0118374573-10d08e80</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">/3</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">32</span><span style="color:#032F62;">s</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.149</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-vttablet-zone1-0120139806-fed29577</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">/3</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">32</span><span style="color:#032F62;">s</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.241</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-vttablet-zone1-2289928654-7de47379</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">/3</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">56</span><span style="color:#032F62;">m</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.218.26</span><span style="color:#24292E;">    </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-vttablet-zone1-2469782763-bfadd780</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">/3</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">32</span><span style="color:#032F62;">s</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.239</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-vttablet-zone1-2548885007-46a852d0</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">/3</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">18</span><span style="color:#032F62;">h</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.182</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-vttablet-zone1-4277914223-0f04a9a6</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">/3</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">56</span><span style="color:#032F62;">m</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.218.35</span><span style="color:#24292E;">    </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-zone1-vtctld-1d4dcad0-cf87d58cb-r2cvg</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">18</span><span style="color:#032F62;">h</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.185</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/example-zone1-vtgate-bc6cde92-685d69cc5c-4w54k</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">18</span><span style="color:#032F62;">h</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.140</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">pod/vitess-operator-6b495ddbb-cq988</span><span style="color:#24292E;">                  </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">d16h</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.244</span><span style="color:#032F62;">.217.248</span><span style="color:#24292E;">   </span><span style="color:#032F62;">qfusion</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                                    </span><span style="color:#032F62;">TYPE</span><span style="color:#24292E;">        </span><span style="color:#032F62;">CLUSTER-IP</span><span style="color:#24292E;">        </span><span style="color:#032F62;">EXTERNAL-IP</span><span style="color:#24292E;">   </span><span style="color:#032F62;">PORT</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">S</span><span style="color:#24292E;">)                        </span><span style="color:#032F62;">AGE</span><span style="color:#24292E;">   </span><span style="color:#032F62;">SELECTOR</span></span>
<span class="line"><span style="color:#6F42C1;">service/example-etcd-faf13de3-client</span><span style="color:#24292E;">    </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.97</span><span style="color:#032F62;">.55.121</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">2379</span><span style="color:#032F62;">/TCP</span><span style="color:#24292E;">                       </span><span style="color:#005CC5;">18</span><span style="color:#032F62;">h</span><span style="color:#24292E;">   </span><span style="color:#032F62;">etcd.planetscale.com/lockserver=example-etcd-faf13de3</span></span>
<span class="line"><span style="color:#6F42C1;">service/example-etcd-faf13de3-peer</span><span style="color:#24292E;">      </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#032F62;">None</span><span style="color:#24292E;">              </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">2380</span><span style="color:#032F62;">/TCP</span><span style="color:#24292E;">                       </span><span style="color:#005CC5;">18</span><span style="color:#032F62;">h</span><span style="color:#24292E;">   </span><span style="color:#032F62;">etcd.planetscale.com/lockserver=example-etcd-faf13de3</span></span>
<span class="line"><span style="color:#6F42C1;">service/example-vtctld-625ee430</span><span style="color:#24292E;">         </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.99</span><span style="color:#032F62;">.245.244</span><span style="color:#24292E;">    </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">15000</span><span style="color:#032F62;">/TCP,15999/TCP</span><span style="color:#24292E;">            </span><span style="color:#005CC5;">18</span><span style="color:#032F62;">h</span><span style="color:#24292E;">   </span><span style="color:#032F62;">planetscale.com/cluster=example,planetscale.com/component=vtctld</span></span>
<span class="line"><span style="color:#6F42C1;">service/example-vtgate-ae7df4b6</span><span style="color:#24292E;">         </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.102</span><span style="color:#032F62;">.28.49</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">15000</span><span style="color:#032F62;">/TCP,15999/TCP,3306/TCP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">18</span><span style="color:#032F62;">h</span><span style="color:#24292E;">   </span><span style="color:#032F62;">planetscale.com/cluster=example,planetscale.com/component=vtgate</span></span>
<span class="line"><span style="color:#6F42C1;">service/example-vttablet-08646a59</span><span style="color:#24292E;">       </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#032F62;">None</span><span style="color:#24292E;">              </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">15000</span><span style="color:#032F62;">/TCP,15999/TCP,9104/TCP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">18</span><span style="color:#032F62;">h</span><span style="color:#24292E;">   </span><span style="color:#032F62;">planetscale.com/cluster=example,planetscale.com/component=vttablet</span></span>
<span class="line"><span style="color:#6F42C1;">service/example-zone1-vtgate-bc6cde92</span><span style="color:#24292E;">   </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">101.106</span><span style="color:#032F62;">.170.227</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">15000</span><span style="color:#032F62;">/TCP,15999/TCP,3306/TCP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">18</span><span style="color:#032F62;">h</span><span style="color:#24292E;">   </span><span style="color:#032F62;">planetscale.com/cell=zone1,planetscale.com/cluster=example,planetscale.com/component=vtgate</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                                                               </span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">   </span><span style="color:#032F62;">VOLUME</span><span style="color:#24292E;">           </span><span style="color:#032F62;">CAPACITY</span><span style="color:#24292E;">   </span><span style="color:#032F62;">ACCESS</span><span style="color:#24292E;"> </span><span style="color:#032F62;">MODES</span><span style="color:#24292E;">   </span><span style="color:#032F62;">STORAGECLASS</span><span style="color:#24292E;">   </span><span style="color:#032F62;">AGE</span><span style="color:#24292E;">   </span><span style="color:#032F62;">VOLUMEMODE</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-etcd-faf13de3-1</span><span style="color:#24292E;">                      </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-12</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">18</span><span style="color:#032F62;">h</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-etcd-faf13de3-2</span><span style="color:#24292E;">                      </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-11</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">18</span><span style="color:#032F62;">h</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-etcd-faf13de3-3</span><span style="color:#24292E;">                      </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-13</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">18</span><span style="color:#032F62;">h</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-vttablet-zone1-0118374573-10d08e80</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-1</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">56</span><span style="color:#032F62;">m</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-vttablet-zone1-0120139806-fed29577</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-4</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">56</span><span style="color:#032F62;">m</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-vttablet-zone1-2289928654-7de47379</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-3</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">56</span><span style="color:#032F62;">m</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-vttablet-zone1-2469782763-bfadd780</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-2</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">18</span><span style="color:#032F62;">h</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-vttablet-zone1-2548885007-46a852d0</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-9</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">18</span><span style="color:#032F62;">h</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Filesystem</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaim/example-vttablet-zone1-4277914223-0f04a9a6</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Bound</span><span style="color:#24292E;">    </span><span style="color:#032F62;">pv-hostpath-6</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">       </span><span style="color:#032F62;">RWO</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">56</span><span style="color:#032F62;">m</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Filesystem</span></span></code></pre></div><p>可见少了两个vttablet的pod及其绑定的pvc,再查看vttablet的状态如下：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># echo &quot;show vitess_tablets;&quot; | mysql --table</span></span>
<span class="line"><span style="color:#B392F0;">+-------+----------+-------+------------+---------+------------------+-----------------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Cell</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Keyspace</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Shard</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">TabletType</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">State</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Alias</span><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Hostname</span><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+-------+----------+-------+------------+---------+------------------+-----------------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">commerce</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">MASTER</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SERVING</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1-2548885007</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">101.244.217.182</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">commerce</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">REPLICA</span><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SERVING</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1-2469782763</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">101.244.217.239</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">customer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">-80</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">MASTER</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SERVING</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1-2289928654</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">101.244.218.26</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">customer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">-80</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">REPLICA</span><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SERVING</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1-0120139806</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">101.244.217.241</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">customer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">80-</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">MASTER</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SERVING</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1-4277914223</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">101.244.218.35</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">customer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">80-</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">REPLICA</span><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SERVING</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zone1-0118374573</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">101.244.217.149</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+-------+----------+-------+------------+---------+------------------+-----------------+</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># echo &quot;show vitess_tablets;&quot; | mysql --table</span></span>
<span class="line"><span style="color:#6F42C1;">+-------+----------+-------+------------+---------+------------------+-----------------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Cell</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Keyspace</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Shard</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TabletType</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">State</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Alias</span><span style="color:#24292E;">            </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Hostname</span><span style="color:#24292E;">        </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+-------+----------+-------+------------+---------+------------------+-----------------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">commerce</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MASTER</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SERVING</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1-2548885007</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">101.244.217.182</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">commerce</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">REPLICA</span><span style="color:#24292E;">    </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SERVING</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1-2469782763</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">101.244.217.239</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">customer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">-80</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MASTER</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SERVING</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1-2289928654</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">101.244.218.26</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">customer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">-80</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">REPLICA</span><span style="color:#24292E;">    </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SERVING</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1-0120139806</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">101.244.217.241</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">customer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">80-</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MASTER</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SERVING</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1-4277914223</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">101.244.218.35</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">customer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">80-</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">REPLICA</span><span style="color:#24292E;">    </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SERVING</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zone1-0118374573</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">101.244.217.149</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+-------+----------+-------+------------+---------+------------------+-----------------+</span></span></code></pre></div><p>customer的keyspace原有的分片customer/-已经被移除。</p><h3 id="清理元数据" tabindex="-1">清理元数据 <a class="header-anchor" href="#清理元数据" aria-label="Permalink to &quot;清理元数据&quot;">​</a></h3><p>最终，我们需要清除元数据，可通过执行一下数据完成清理：</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">vtctlclient</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">DeleteShard</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-recursive</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">customer/-</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">vtctlclient</span><span style="color:#24292E;"> </span><span style="color:#032F62;">DeleteShard</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-recursive</span><span style="color:#24292E;"> </span><span style="color:#032F62;">customer/-</span></span></code></pre></div><h3 id="清理磁盘" tabindex="-1">清理磁盘 <a class="header-anchor" href="#清理磁盘" aria-label="Permalink to &quot;清理磁盘&quot;">​</a></h3><p>最终，只需要将local-pv中的数据清理掉即可。</p>`,131),c=[t];function r(y,E,F,i,C,B){return n(),a("div",null,c)}const d=s(e,[["render",r]]);export{m as __pageData,d as default};
