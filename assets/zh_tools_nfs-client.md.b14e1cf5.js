import{_ as s,o as a,c as e,Q as n}from"./chunks/framework.48927342.js";const b=JSON.parse('{"title":"NFS Client","description":"","frontmatter":{"date":"2022-11-23T00:00:00.000Z"},"headers":[],"relativePath":"zh/tools/nfs-client.md","filePath":"zh/tools/nfs-client.md"}'),l={name:"zh/tools/nfs-client.md"},o=n(`<h1 id="nfs-client" tabindex="-1">NFS Client <a class="header-anchor" href="#nfs-client" aria-label="Permalink to &quot;NFS Client&quot;">​</a></h1><h2 id="概览" tabindex="-1">概览 <a class="header-anchor" href="#概览" aria-label="Permalink to &quot;概览&quot;">​</a></h2><p>NFS Client可以挂载NFS Server管理的共享目录，使得多台服务器可以风筒管理共享目录，NFS支持多点挂载，即在多个服务器上同时挂载同一个共享目录。</p><h2 id="环境说明" tabindex="-1">环境说明 <a class="header-anchor" href="#环境说明" aria-label="Permalink to &quot;环境说明&quot;">​</a></h2><ul><li>NFS Server所在服务器IP：192.168.1.240</li><li>NFS Client安装服务器IP：192.168.1.241</li></ul><h2 id="安装nfs-client" tabindex="-1">安装NFS Client <a class="header-anchor" href="#安装nfs-client" aria-label="Permalink to &quot;安装NFS Client&quot;">​</a></h2><h3 id="安装-nfs-工具及其依赖" tabindex="-1">安装 NFS 工具及其依赖 <a class="header-anchor" href="#安装-nfs-工具及其依赖" aria-label="Permalink to &quot;安装 NFS 工具及其依赖&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ sudo yum install nfs-utils</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ sudo yum install nfs-utils</span></span></code></pre></div><h3 id="客户端配置" tabindex="-1">客户端配置 <a class="header-anchor" href="#客户端配置" aria-label="Permalink to &quot;客户端配置&quot;">​</a></h3><ol><li><p>设置 rpcbind 服务的开机启动</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ sudo systemctl enable rpcbind</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ sudo systemctl enable rpcbind</span></span></code></pre></div></li><li><p>启动 rpcbind 服务</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ sudo systemctl start rpcbind</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ sudo systemctl start rpcbind</span></span></code></pre></div></li></ol><p>客户端不需要打开防火墙，因为客户端时发出请求方，网络能连接到服务端即可。<br> 客户端也不需要开启 NFS 服务，因为不共享目录。</p><h2 id="客户端连接-nfs-server" tabindex="-1">客户端连接 NFS Server <a class="header-anchor" href="#客户端连接-nfs-server" aria-label="Permalink to &quot;客户端连接 NFS Server&quot;">​</a></h2><ol><li><p>查询NFS Server的共享目录</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ showmount -e 192.168.1.240</span></span>
<span class="line"><span style="color:#e1e4e8;">Export list for 192.168.1.240:</span></span>
<span class="line"><span style="color:#e1e4e8;">/home/nfs/data *</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ showmount -e 192.168.1.240</span></span>
<span class="line"><span style="color:#24292e;">Export list for 192.168.1.240:</span></span>
<span class="line"><span style="color:#24292e;">/home/nfs/data *</span></span></code></pre></div></li><li><p>在客户端创建目录</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ sudo mkdir /home/nfs/mount-data</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ sudo mkdir /home/nfs/mount-data</span></span></code></pre></div></li><li><p>挂载共享目录</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ sudo mount -t nfs 192.168.1.240:/home/nfs/data /home/nfs/mount-data</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ sudo mount -t nfs 192.168.1.240:/home/nfs/data /home/nfs/mount-data</span></span></code></pre></div></li><li><p>查看挂载</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ mount</span></span>
<span class="line"><span style="color:#e1e4e8;">...</span></span>
<span class="line"><span style="color:#e1e4e8;">...</span></span>
<span class="line"><span style="color:#e1e4e8;">192.168.1.240:/home/nfs/data on /home/nfs/mount-data type nfs4 (rw,relatime,vers=4.1,rsize=1048576,wsize=1048576,namlen=255,hard,proto=tcp,timeo=600,retrans=2,sec=sys,clientaddr=192.168.1.241,local_lock=none,addr=192.168.1.240)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ mount</span></span>
<span class="line"><span style="color:#24292e;">...</span></span>
<span class="line"><span style="color:#24292e;">...</span></span>
<span class="line"><span style="color:#24292e;">192.168.1.240:/home/nfs/data on /home/nfs/mount-data type nfs4 (rw,relatime,vers=4.1,rsize=1048576,wsize=1048576,namlen=255,hard,proto=tcp,timeo=600,retrans=2,sec=sys,clientaddr=192.168.1.241,local_lock=none,addr=192.168.1.240)</span></span></code></pre></div></li></ol><p>这说明已经挂载成功了。</p><h2 id="测试-nfs" tabindex="-1">测试 NFS <a class="header-anchor" href="#测试-nfs" aria-label="Permalink to &quot;测试 NFS&quot;">​</a></h2><ol><li><p>在客户端向共享目录创建一个文件</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ cd /home/nfs/mount-data</span></span>
<span class="line"><span style="color:#e1e4e8;">$ sudo touch abc</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ cd /home/nfs/mount-data</span></span>
<span class="line"><span style="color:#24292e;">$ sudo touch abc</span></span></code></pre></div></li><li><p>在NFS 服务端 <code>192.168.1.240</code> 查看一下</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ cd /home/nfs/data</span></span>
<span class="line"><span style="color:#e1e4e8;">$ ll</span></span>
<span class="line"><span style="color:#e1e4e8;">total 0</span></span>
<span class="line"><span style="color:#e1e4e8;">-rw-r--r--. 1 root  7 Mar 10 03:54 abc</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ cd /home/nfs/data</span></span>
<span class="line"><span style="color:#24292e;">$ ll</span></span>
<span class="line"><span style="color:#24292e;">total 0</span></span>
<span class="line"><span style="color:#24292e;">-rw-r--r--. 1 root  7 Mar 10 03:54 abc</span></span></code></pre></div></li></ol><p>可以看到，共享目录已经写入了。</p>`,17),p=[o];function t(c,i,r,d,h,u){return a(),e("div",null,p)}const v=s(l,[["render",t]]);export{b as __pageData,v as default};
