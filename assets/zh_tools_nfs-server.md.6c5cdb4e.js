import{_ as s,o as e,c as a,Q as l}from"./chunks/framework.48927342.js";const y=JSON.parse('{"title":"NFS Server","description":"","frontmatter":{"date":"2022-11-24T00:00:00.000Z"},"headers":[],"relativePath":"zh/tools/nfs-server.md","filePath":"zh/tools/nfs-server.md"}'),n={name:"zh/tools/nfs-server.md"},o=l(`<h1 id="nfs-server" tabindex="-1">NFS Server <a class="header-anchor" href="#nfs-server" aria-label="Permalink to &quot;NFS Server&quot;">​</a></h1><h2 id="概览" tabindex="-1">概览 <a class="header-anchor" href="#概览" aria-label="Permalink to &quot;概览&quot;">​</a></h2><p>NFS Server管理一个或多个文件目录，使得这些文件目录可以被挂载到多台服务器上，成为多台服务器共享的文件目录。</p><h2 id="环境说明" tabindex="-1">环境说明 <a class="header-anchor" href="#环境说明" aria-label="Permalink to &quot;环境说明&quot;">​</a></h2><p>通过如下指令查看系统环境：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ cat /etc/redhat-release </span></span>
<span class="line"><span style="color:#e1e4e8;">CentOS Linux release 7.9.2009 (Core)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ cat /etc/redhat-release </span></span>
<span class="line"><span style="color:#24292e;">CentOS Linux release 7.9.2009 (Core)</span></span></code></pre></div><h2 id="安装nfs-server" tabindex="-1">安装NFS Server <a class="header-anchor" href="#安装nfs-server" aria-label="Permalink to &quot;安装NFS Server&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ sudo yum install nfs-utils</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ sudo yum install nfs-utils</span></span></code></pre></div><p>只安装 nfs-utils 即可，rpcbind 属于它的依赖，也会安装上。</p><h2 id="配置nfs-server" tabindex="-1">配置NFS Server <a class="header-anchor" href="#配置nfs-server" aria-label="Permalink to &quot;配置NFS Server&quot;">​</a></h2><ol><li><p>设置 NFS 服务开机启动</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ sudo systemctl enable rpcbind</span></span>
<span class="line"><span style="color:#e1e4e8;">$ sudo systemctl enable nfs</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ sudo systemctl enable rpcbind</span></span>
<span class="line"><span style="color:#24292e;">$ sudo systemctl enable nfs</span></span></code></pre></div></li><li><p>启动 NFS 服务</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ sudo systemctl start rpcbind</span></span>
<span class="line"><span style="color:#e1e4e8;">$ sudo systemctl start nfs</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ sudo systemctl start rpcbind</span></span>
<span class="line"><span style="color:#24292e;">$ sudo systemctl start nfs</span></span></code></pre></div></li><li><p>打开防火墙 rpc-bind 和 nfs 的服务 如果防火墙未开启，则可以跳过此步骤：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ sudo firewall-cmd --zone=public --permanent --add-service={rpc-bind,mountd,nfs}</span></span>
<span class="line"><span style="color:#e1e4e8;">success</span></span>
<span class="line"><span style="color:#e1e4e8;">$ sudo firewall-cmd --reload</span></span>
<span class="line"><span style="color:#e1e4e8;">success</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ sudo firewall-cmd --zone=public --permanent --add-service={rpc-bind,mountd,nfs}</span></span>
<span class="line"><span style="color:#24292e;">success</span></span>
<span class="line"><span style="color:#24292e;">$ sudo firewall-cmd --reload</span></span>
<span class="line"><span style="color:#24292e;">success</span></span></code></pre></div></li></ol><h2 id="配置共享目录" tabindex="-1">配置共享目录 <a class="header-anchor" href="#配置共享目录" aria-label="Permalink to &quot;配置共享目录&quot;">​</a></h2><ol><li>创建在服务器之间共享的目录</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ sudo mkdir -p /home/nfs/data</span></span>
<span class="line"><span style="color:#e1e4e8;">$ sudo chmod 755 /home/nfs/data</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ sudo mkdir -p /home/nfs/data</span></span>
<span class="line"><span style="color:#24292e;">$ sudo chmod 755 /home/nfs/data</span></span></code></pre></div><ol start="2"><li><p>导出相应配置目录</p><ul><li>编辑导出文件：</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ sudo vi /etc/exports</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ sudo vi /etc/exports</span></span></code></pre></div><ul><li>添加如下配置</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">/home/nfs/data/     192.168.1.0/24(rw,sync,no_root_squash,no_all_squash)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">/home/nfs/data/     192.168.1.0/24(rw,sync,no_root_squash,no_all_squash)</span></span></code></pre></div><ul><li><p>配置说明：</p><ul><li><code>/data</code>: 共享目录位置。</li><li><code>192.168.1.0/24</code>: 客户端 IP 范围，<code>*</code> 代表所有，即没有限制。</li><li><code>rw</code>: 权限设置，可读可写。</li><li><code>sync</code>: 同步共享目录。</li><li><code>no_root_squash</code>: 可以使用 root 授权。</li><li><code>no_all_squash</code>: 可以使用普通用户授权。</li></ul></li></ul></li></ol><h2 id="重启-nfs-server" tabindex="-1">重启 NFS Server <a class="header-anchor" href="#重启-nfs-server" aria-label="Permalink to &quot;重启 NFS Server&quot;">​</a></h2><p>重启NFS Server:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ sudo systemctl restart nfs</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ sudo systemctl restart nfs</span></span></code></pre></div><p>检查一下本地的共享目录:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ showmount -e localhost</span></span>
<span class="line"><span style="color:#e1e4e8;">Export list for localhost:</span></span>
<span class="line"><span style="color:#e1e4e8;">/home/nfs/data 192.168.1.0/24</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ showmount -e localhost</span></span>
<span class="line"><span style="color:#24292e;">Export list for localhost:</span></span>
<span class="line"><span style="color:#24292e;">/home/nfs/data 192.168.1.0/24</span></span></code></pre></div><p>这样，服务端就配置好了，接下来配置客户端，连接服务端，使用共享目录。</p>`,21),p=[o];function t(c,i,r,d,h,u){return e(),a("div",null,p)}const g=s(n,[["render",t]]);export{y as __pageData,g as default};
